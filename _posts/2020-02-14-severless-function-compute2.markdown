---
layout: post
title: '前端severless实践-阿里云函数计算'
subtitle: 'severless'
date: 2020-02-1 19:00:00
author: 'wuqiuyu'
header-img: "img/in-post/timg.jpeg"
header-mask: 0.3
catalog: true
tags:
  - severless
  - 函数计算
---

> 工作过程中需要完成一个年终总结的项目，由于该项目涉及一些和后端的交互，但是交互比较简单，刚好最近severless大热，所以尝试用severless解决。这里主要用到的是阿里云的函数计算<br/>

<div class="lake-engine-view lake-typography-traditional" tabindex="0"><h1 id="VaMeA"><a class="lake-anchor" style="top: 13px;"><span class="lake-anchor-button lake-icon lake-icon-h1"></span></a>什么是函数计算</h1><p style="text-indent: 2em;">函数计算是事件驱动的全托管计算服务。使用函数计算，您无需采购与管理服务器等基础设施，只需编写并上传代码。函数计算为您准备好计算资源，弹性地可靠地运行任务，并提供日志查询、性能监控和报警等功能。</p><p>借助函数计算，您可以快速构建任何类型的应用和服务，并且只需为任务实际消耗的资源付费。（来自阿里云）</p><p style="text-indent: 2em;">简单的讲就是你可以只关心业务代码的实现，不需要关系其他任何服务器配置，代理配置，监控等等运维相关的事情，只有把实现的代码托管到函数计算就行。</p><p style="text-indent: 2em;"><span data-card-type="inline" data-lake-card="image" contenteditable="false" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F101638%2F1578994519614-8b17a758-1770-46d2-9122-a743e779ca16.png%22%2C%22originWidth%22%3A884%2C%22originHeight%22%3A273%2C%22name%22%3A%22image.png%22%2C%22size%22%3A24647%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A371.09583%2C%22y%22%3A22.099998%2C%22width%22%3A70.90414000000004%2C%22height%22%3A19.337498000000004%2C%22text%22%3A%22%E5%88%9B%E5%BB%BA%E5%87%BD%E6%95%B0%22%7D%2C%7B%22x%22%3A233.89165%2C%22y%22%3A39.595833%2C%22width%22%3A68.14167999999998%2C%22height%22%3A19.337497%2C%22text%22%3A%22%E5%88%9B%E5%BB%BA%E6%9C%8D%E5%8A%A1%22%7D%2C%7B%22x%22%3A502.77496%2C%22y%22%3A39.595833%2C%22width%22%3A124.31249999999994%2C%22height%22%3A19.337497%2C%22text%22%3A%22%E6%98%AF%E5%90%A6%E4%BD%BF%E7%94%A8%E8%A7%A6%E5%8F%91%E5%99%A8%22%7D%2C%7B%22x%22%3A741.2708%2C%22y%22%3A121.549995%2C%22width%22%3A88.39999999999998%2C%22height%22%3A20.258325000000013%2C%22text%22%3A%22%E5%88%9B%E5%BB%BA%E8%A7%A6%E5%8F%91%E5%99%A8%22%7D%2C%7B%22x%22%3A86.55833%2C%22y%22%3A122.470825%2C%22width%22%3A72.74582%2C%22height%22%3A21.179175%2C%22text%22%3A%22%E5%87%BD%E6%95%B0%E8%AE%A1%E7%AE%97%22%7D%2C%7B%22x%22%3A199.82082%2C%22y%22%3A208.10832%2C%22width%22%3A70.90416000000002%2C%22height%22%3A19.337500000000006%2C%22text%22%3A%22%E4%B8%9A%E5%8A%A1%E5%A2%9E%E7%9B%8A%22%7D%2C%7B%22x%22%3A512.9041%2C%22y%22%3A209.02916%2C%22width%22%3A71.82500000000005%2C%22height%22%3A17.495840000000015%2C%22text%22%3A%22%E6%89%A7%E8%A1%8C%E5%87%BD%E6%95%B0%22%7D%2C%7B%22x%22%3A375.69998%2C%22y%22%3A226.525%2C%22width%22%3A70.90418%2C%22height%22%3A18.416650000000004%2C%22text%22%3A%22%E6%9F%A5%E7%9C%8B%E6%97%A5%E5%BF%97%22%7D%5D%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%E5%88%9B%E5%BB%BA%E5%87%BD%E6%95%B0%20%E5%88%9B%E5%BB%BA%E6%9C%8D%E5%8A%A1%20%E6%98%AF%E5%90%A6%E4%BD%BF%E7%94%A8%E8%A7%A6%E5%8F%91%E5%99%A8%20%E5%88%9B%E5%BB%BA%E8%A7%A6%E5%8F%91%E5%99%A8%20%E5%87%BD%E6%95%B0%E8%AE%A1%E7%AE%97%20%E4%B8%9A%E5%8A%A1%E5%A2%9E%E7%9B%8A%20%E6%89%A7%E8%A1%8C%E5%87%BD%E6%95%B0%20%E6%9F%A5%E7%9C%8B%E6%97%A5%E5%BF%97%22%2C%22width%22%3A884%2C%22height%22%3A273%7D"><span data-card-element="body"><span data-card-element="center"><span class="lake-image">
    <span class="lake-image-content lake-image-content-isvalid">
      <span data-role="detail" class="lake-image-detail">
        <span class="lake-image-meta" style="">
          <span class="lake-image-warning" style="display: none;">
            <i class="anticon anticon-exclamation-circle">
              <svg viewBox="64 64 896 896" class="" data-icon="exclamation-circle" width="1em" height="1em" fill="currentColor" aria-hidden="true">
                <path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"></path><path d="M464 688a48 48 0 1 0 96 0 48 48 0 1 0-96 0zM488 576h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"></path>
              </svg>
            </i>
          </span>
          <img data-role="image" src="https://cdn.nlark.com/yuque/0/2020/png/101638/1578994519614-8b17a758-1770-46d2-9122-a743e779ca16.png?x-oss-process=image/resize,w_746" data-raw-src="https://cdn.nlark.com/yuque/0/2020/png/101638/1578994519614-8b17a758-1770-46d2-9122-a743e779ca16.png" class="image lake-drag-image" alt="image.png" title="image.png" style="border: none; box-shadow: none; visibility: visible; width: 479px; height: 148px;">
          
  
  
          <span data-role="maximize" class="lake-image-editor-maximize" style="display: none;"><span class="lake-icon lake-icon-full-screen"></span></span>
          <div class="lake-image-mask"><p class="lake-image-mask-point" style="font-size: 16.3187483122172px;left: 313.164580520362px;top: 18.649998312217193px;">创建函数</p><p class="lake-image-mask-point" style="font-size: 16.318747468325792px;left: 197.37915260180995px;top: 33.4145830520362px;">创建服务</p><p class="lake-image-mask-point" style="font-size: 16.318747468325792px;left: 424.28746624434393px;top: 33.4145830520362px;">是否使用触发器</p><p class="lake-image-mask-point" style="font-size: 17.09582630090499px;left: 625.55205520362px;top: 102.57499578054298px;">创建触发器</p><p class="lake-image-mask-point" style="font-size: 17.872923699095022px;left: 73.04583052036199px;top: 103.35207630090498px;">函数计算</p><p class="lake-image-mask-point" style="font-size: 16.318750000000005px;left: 168.62707208144795px;top: 175.62082208144795px;">业务增益</p><p class="lake-image-mask-point" style="font-size: 14.76458895927603px;left: 432.8353604072398px;top: 176.39791104072398px;">执行函数</p><p class="lake-image-mask-point" style="font-size: 15.541652601809957px;left: 317.0499831221719px;top: 191.1625px;">查看日志</p></div>
        </span>
      </span>
    </span>
  </span></span></span></span></p><p style="text-indent: 2em;">函数计算支持多种语言：</p><p style="text-indent: 2em; padding-left: 2em;">nodejs</p><p style="text-indent: 2em; padding-left: 2em;">python</p><p style="text-indent: 2em; padding-left: 2em;">php</p><p style="text-indent: 2em; padding-left: 2em;">java</p><p style="text-indent: 2em; padding-left: 2em;">c#</p><p style="text-indent: 2em; padding-left: 2em;"><span style="color: #333333;">Custom runtime</span></p><p><br></p><h1 id="4K8dt"><a class="lake-anchor" style="top: 13px;"><span class="lake-anchor-button lake-icon lake-icon-h1"></span></a><span>怎么开始一个函数计算</span></h1><p style="text-indent: 2em;"><span>函数计算可以通过四种方式创建：</span></p><ul data-lake-indent="1"><li><a href="https://help.aliyun.com/document_detail/51783.html?spm=a2c4g.11186623.6.554.1e1b10f3PhAs0U#using-console" target="_blank" rel="noopener noreferrer">使用控制台编写函数（<strong>推荐</strong>）</a></li><li><a href="https://help.aliyun.com/document_detail/51783.html?spm=a2c4g.11186623.6.554.1e1b10f3PhAs0U#using-fun" target="_blank" rel="noopener noreferrer">使用 Fun 创建函数（<strong>推荐</strong>）</a></li><li><a href="https://help.aliyun.com/document_detail/51783.html?spm=a2c4g.11186623.6.554.1e1b10f3PhAs0U#using-fcli" target="_blank" rel="noopener noreferrer">使用 fcli 创建函数</a></li><li><a href="https://help.aliyun.com/document_detail/51783.html?spm=a2c4g.11186623.6.554.1e1b10f3PhAs0U#using-sdk" target="_blank" rel="noopener noreferrer">使用 SDK 创建函数</a></li></ul><p>&nbsp; &nbsp; （官方文档都有就不详细介绍）</p><p><br></p><h2 id="xJmHH"><a class="lake-anchor" style="top: 11px;"><span class="lake-anchor-button lake-icon lake-icon-h2"></span></a>创建服务</h2><p style="text-indent: 2em;">什么是服务？在函数计算中，服务就是<span style="color: #333333;">管理函数计算的基本资源单位。你可以在服务级别上授权、配置日志和创建函数等。</span></p><h3 id="xfflI"><a class="lake-anchor" style="top: 9px;"><span class="lake-anchor-button lake-icon lake-icon-h3"></span></a><span style="color: #333333;">服务的属性</span></h3><ul><li>serviceName（必选）：服务的名字</li><li>description（可选）：服务的描述。<br></li><li>role（可选）：授予函数计算执行函数所需权限, 使用场景包括：</li></ul><ul data-lake-indent="1"><li>授权函数计算服务使用用户的日志服务资源存储和分析函数运行日志。</li><li>授权函数计算服务运行需要访问其他云资源的函数。</li><li>关于role的使用细节，请参考<a href="https://help.aliyun.com/document_detail/52885.html" target="_blank" rel="noopener noreferrer">函数计算权限管理</a>。</li></ul><ul><li>logConfig（可选）：设置日志服务的项目和日志库，存储和分析函数运行日志。</li></ul><ul data-lake-indent="1"><li>如果您未配置该项，则无法查看函数运行日志。强烈建议您开启日志服务，并配置该属性.</li></ul><ul><li>vpcConfig (可选) : 配置VPC选项可让函数访问指定VPC。<br></li><li>internetAccess (可选) : 设为true可让函数访问公网。</li></ul><p><br></p><p>在通过代码创建的项目中，服务配置在一个叫做template.yml的文件中</p><p><br></p><p><span data-card-type="inline" data-lake-card="image" contenteditable="false" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F101638%2F1578996221526-46436f15-bf9f-4e1f-886d-9c8c1d9af4ae.png%22%2C%22originWidth%22%3A703%2C%22originHeight%22%3A301%2C%22name%22%3A%22image.png%22%2C%22size%22%3A50049%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A35.88229%2C%22y%22%3A3.6614583%2C%22width%22%3A298.77501%2C%22height%22%3A16.1104147%2C%22text%22%3A%22ROSTemplateFormatversion%3A2015-09-01%22%7D%2C%7B%22x%22%3A40.27604%2C%22y%22%3A24.897915%2C%22width%22%3A303.90101999999996%2C%22height%22%3A15.378125%2C%22text%22%3A%22Transform%3Aaliyuniserverless-2018-04-03%22%7D%2C%7B%22x%22%3A24.897915%2C%22y%22%3A47.598957%2C%22width%22%3A84.213545%2C%22height%22%3A12.448959000000002%2C%22text%22%3A%22Resources%3A%22%7D%2C%7B%22x%22%3A43.9375%2C%22y%22%3A69.5677%2C%22width%22%3A166.2302%2C%22height%22%3A12.44896%2C%22text%22%3A%22serverless-service%22%7D%2C%7B%22x%22%3A69.5677%2C%22y%22%3A88.60729%2C%22width%22%3A275.34166%2C%22height%22%3A14.64582999999999%2C%22text%22%3A%22TypeAliyun%3A%3Aserverlessiiservice%22%7D%2C%7B%22x%22%3A60.780205%2C%22y%22%3A109.84375%2C%22width%22%3A92.268745%2C%22height%22%3A13.181244000000007%2C%22text%22%3A%22Properties%3A%22%7D%2C%7B%22x%22%3A74.69375%2C%22y%22%3A130.34792%2C%22width%22%3A62.97707%2C%22height%22%3A14.645820000000015%2C%22text%22%3A%22Role%3A'a%22%7D%2C%7B%22x%22%3A190.39583%2C%22y%22%3A130.34792%2C%22width%22%3A382.25621000000007%2C%22height%22%3A14.645820000000015%2C%22text%22%3A%22s%3Aram%3A%3A1826604963136989%3AoLe%2Fnweri9310%22%7D%2C%7B%22x%22%3A73.96146%2C%22y%22%3A150.85208%2C%22width%22%3A79.81979%2C%22height%22%3A15.378129999999999%2C%22text%22%3A%22VpcConfig%3A%22%7D%2C%7B%22x%22%3A98.12708%2C%22y%22%3A172.08853%2C%22width%22%3A251.90831999999997%2C%22height%22%3A15.378129999999999%2C%22text%22%3A%22VpcId%3Avpc-bp118i3261u5gylf3d5%22%7D%2C%7B%22x%22%3A91.53645%2C%22y%22%3A192.5927%2C%22width%22%3A87.875%2C%22height%22%3A13.913539999999983%2C%22text%22%3A%22VSwitchIds%3A%22%7D%2C%7B%22x%22%3A125.22187%2C%22y%22%3A214.56145%2C%22width%22%3A202.11247999999998%2C%22height%22%3A13.913539999999983%2C%22text%22%3A%22-vsw-bp15iu1gpzoabzfg88d%22%7D%2C%7B%22x%22%3A118.63125%2C%22y%22%3A235.79791%2C%22width%22%3A227.01041%2C%22height%22%3A13.913549999999987%2C%22text%22%3A%22-VSw-bp1bsulnv3svr4wi9tru1%22%7D%2C%7B%22x%22%3A116.43437%2C%22y%22%3A256.30206%2C%22width%22%3A310.49166%2C%22height%22%3A15.37814000000003%2C%22text%22%3A%22securityGroupid%3Asg-bp1gctn5tdxha82%22%7D%2C%7B%22x%22%3A76.890625%2C%22y%22%3A278.2708%2C%22width%22%3A166.962495%2C%22height%22%3A13.181299999999965%2C%22text%22%3A%22Internetaccessstrue%22%7D%5D%2C%22style%22%3A%22none%22%2C%22search%22%3A%22ROSTemplateFormatversion%3A2015-09-01%20Transform%3Aaliyuniserverless-2018-04-03%20Resources%3A%20serverless-service%20TypeAliyun%3A%3Aserverlessiiservice%20Properties%3A%20Role%3A'a%20s%3Aram%3A%3A1826604963136989%3AoLe%2Fnweri9310%20VpcConfig%3A%20VpcId%3Avpc-bp118i3261u5gylf3d5%20VSwitchIds%3A%20-vsw-bp15iu1gpzoabzfg88d%20-VSw-bp1bsulnv3svr4wi9tru1%20securityGroupid%3Asg-bp1gctn5tdxha82%20Internetaccessstrue%22%2C%22width%22%3A703%2C%22height%22%3A301%7D"><span data-card-element="body"><span data-card-element="center"><span class="lake-image">
    <span class="lake-image-content lake-image-content-isvalid">
      <span data-role="detail" class="lake-image-detail">
        <span class="lake-image-meta" style="">
          <span class="lake-image-warning" style="display: none;">
            <i class="anticon anticon-exclamation-circle">
              <svg viewBox="64 64 896 896" class="" data-icon="exclamation-circle" width="1em" height="1em" fill="currentColor" aria-hidden="true">
                <path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"></path><path d="M464 688a48 48 0 1 0 96 0 48 48 0 1 0-96 0zM488 576h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"></path>
              </svg>
            </i>
          </span>
          <img data-role="image" src="https://cdn.nlark.com/yuque/0/2020/png/101638/1578996221526-46436f15-bf9f-4e1f-886d-9c8c1d9af4ae.png" data-raw-src="https://cdn.nlark.com/yuque/0/2020/png/101638/1578996221526-46436f15-bf9f-4e1f-886d-9c8c1d9af4ae.png" class="image lake-drag-image" alt="image.png" title="image.png" style="border: none; box-shadow: none; visibility: visible; width: 479px; height: 205px;">
          
  
  
          <span data-role="maximize" class="lake-image-editor-maximize" style="display: none;"><span class="lake-icon lake-icon-full-screen"></span></span>
          <div class="lake-image-mask"><p class="lake-image-mask-point" style="font-size: 16.1104147px;left: 35.88229px;top: 3.6614583px;">ROSTemplateFormatversion:2015-09-01</p><p class="lake-image-mask-point" style="font-size: 15.378125px;left: 40.27604px;top: 24.897915px;">Transform:aliyuniserverless-2018-04-03</p><p class="lake-image-mask-point" style="font-size: 12.448959000000002px;left: 24.897915px;top: 47.598957px;">Resources:</p><p class="lake-image-mask-point" style="font-size: 12.44896px;left: 43.9375px;top: 69.5677px;">serverless-service</p><p class="lake-image-mask-point" style="font-size: 14.64582999999999px;left: 69.5677px;top: 88.60729px;">TypeAliyun::serverlessiiservice</p><p class="lake-image-mask-point" style="font-size: 13.181244000000007px;left: 60.780205px;top: 109.84375px;">Properties:</p><p class="lake-image-mask-point" style="font-size: 14.645820000000015px;left: 74.69375px;top: 130.34792px;">Role:'a</p><p class="lake-image-mask-point" style="font-size: 14.645820000000015px;left: 190.39583px;top: 130.34792px;">s:ram::1826604963136989:oLe/nweri9310</p><p class="lake-image-mask-point" style="font-size: 15.378129999999999px;left: 73.96146px;top: 150.85208px;">VpcConfig:</p><p class="lake-image-mask-point" style="font-size: 15.378129999999999px;left: 98.12708px;top: 172.08853px;">VpcId:vpc-bp118i3261u5gylf3d5</p><p class="lake-image-mask-point" style="font-size: 13.913539999999983px;left: 91.53645px;top: 192.5927px;">VSwitchIds:</p><p class="lake-image-mask-point" style="font-size: 13.913539999999983px;left: 125.22187px;top: 214.56145px;">-vsw-bp15iu1gpzoabzfg88d</p><p class="lake-image-mask-point" style="font-size: 13.913549999999987px;left: 118.63125px;top: 235.79791px;">-VSw-bp1bsulnv3svr4wi9tru1</p><p class="lake-image-mask-point" style="font-size: 15.37814000000003px;left: 116.43437px;top: 256.30206px;">securityGroupid:sg-bp1gctn5tdxha82</p><p class="lake-image-mask-point" style="font-size: 13.181299999999965px;left: 76.890625px;top: 278.2708px;">Internetaccessstrue</p></div>
        </span>
      </span>
    </span>
  </span></span></span></span></p><p style="text-indent: 2em;"><span><br></span></p><h2 id="6qqSQ"><a class="lake-anchor" style="top: 11px;"><span class="lake-anchor-button lake-icon lake-icon-h2"></span></a>创建函数</h2><p style="text-indent: 2em;"><span style="color: #333333;">函数是系统调度和运行的单位。函数必须从属于服务，一个服务下的所有函数都共享该服务的属性，例如授权，日志设置。</span></p><h3 id="fjaO7"><a class="lake-anchor" style="top: 9px;"><span class="lake-anchor-button lake-icon lake-icon-h3"></span></a>函数属性</h3><ul data-lake-indent="1"><li><strong>functionName（必选）：</strong>函数的名字。在当前服务内唯一。</li><li><strong>runtime（必选）：</strong> 函数运行时类型。</li><li><strong>code（必选）：</strong> 代码包。Java 语言需要上传 jar 包，其他语言上传 zip 包，可以存放在 OSS 上，或者直接上传代码包。</li><li><strong>handler（必选）：</strong> 处理函数，它是函数计算系统运行用户函数的调用入口。</li><li><strong>description（可选）：</strong> 函数的描述。函数计算系统并不会使用该属性值，但建议您为服务设置一个简洁、清晰的描述。</li><li><strong>timeout（可选）：</strong> 函数的最大运行时间，单位为秒。</li><li><strong>MemorySize（可选）：</strong> 函数运行所需的内存资源，单位为 MB。取值范围为 [128, 3072]，以 64 MB 为步长递进。</li><li><strong>Initializer（可选）：</strong> <a href="https://help.aliyun.com/document_detail/94670.html" target="_blank" rel="noopener noreferrer">initializer</a> 入口，它是函数计算系统运行用户 initializer 函数的调用入口。</li><li><strong>InitializationTimeout（可选）：</strong> initializer 最大运行时间，单位为秒。</li></ul><p><br></p><p>函数属性也配置在template.yml中</p><p><br></p><p style="text-indent: 2em;"><span data-card-type="inline" data-lake-card="image" contenteditable="false" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F101638%2F1578998549947-1099926b-0863-4996-9025-703d61dec716.png%22%2C%22originWidth%22%3A693%2C%22originHeight%22%3A578%2C%22name%22%3A%22image.png%22%2C%22size%22%3A84110%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A31.040625%2C%22y%22%3A7.2187495%2C%22width%22%3A300.299975%2C%22height%22%3A14.437500499999999%2C%22text%22%3A%22ROSTemplateFormatVersion15-09-01%22%7D%2C%7B%22x%22%3A44.034374%2C%22y%22%3A28.874998%2C%22width%22%3A298.13435599999997%2C%22height%22%3A13.715624000000002%2C%22text%22%3A%22Transform%3AAliyun%3Aserverless-2018-04-03%22%7D%2C%7B%22x%22%3A28.153124%2C%22y%22%3A49.809372%2C%22width%22%3A97.453126%2C%22height%22%3A12.993750999999996%2C%22text%22%3A%22Resources%3A%22%7D%2C%7B%22x%22%3A41.146873%2C%22y%22%3A70.743744%2C%22width%22%3A168.196857%2C%22height%22%3A13.715626%2C%22text%22%3A%22serverless-service%22%7D%2C%7B%22x%22%3A74.35312%2C%22y%22%3A90.956245%2C%22width%22%3A277.92188%2C%22height%22%3A15.881249000000011%2C%22text%22%3A%22Type%3AAliyun%3A%3Aserverlessiiseryice%22%7D%2C%7B%22x%22%3A61.35937%2C%22y%22%3A113.33437%2C%22width%22%3A95.28750000000001%2C%22height%22%3A13.715624999999989%2C%22text%22%3A%22Properties%22%7D%2C%7B%22x%22%3A267.09375%2C%22y%22%3A131.38124%2C%22width%22%3A370.32185000000004%2C%22height%22%3A16.603139999999996%2C%22text%22%3A%2226604963136989%3Aole%2Fnew-servic78969140310-roLe%22%7D%2C%7B%22x%22%3A80.12812%2C%22y%22%3A155.92499%2C%22width%22%3A84.45938000000001%2C%22height%22%3A12.99375999999998%2C%22text%22%3A%22VpcConfig%3A%22%7D%2C%7B%22x%22%3A111.89062%2C%22y%22%3A175.41562%2C%22width%22%3A246.15938%2C%22height%22%3A15.159379999999999%2C%22text%22%3A%22VpcId%3Avpc-bp118i032r61u5gylf3d5%22%7D%2C%7B%22x%22%3A93.84374%2C%22y%22%3A196.34999%2C%22width%22%3A96.73125999999999%2C%22height%22%3A13.715620000000001%2C%22text%22%3A%22VSwitchIds%3A%22%7D%2C%7B%22x%22%3A119.10937%2C%22y%22%3A218.00624%2C%22width%22%3A223.78125%2C%22height%22%3A14.4375%2C%22text%22%3A%22-vsw-bp15iu1qpzoabzfgt848d%22%7D%2C%7B%22x%22%3A110.44687%2C%22y%22%3A238.21873%2C%22width%22%3A234.60937%2C%22height%22%3A15.881259999999997%2C%22text%22%3A%22-vsw-bp1bsulnv3svr4wi9tru1%22%7D%2C%7B%22x%22%3A112.612495%2C%22y%22%3A258.43124%2C%22width%22%3A275.034355%2C%22height%22%3A16.60311999999999%2C%22text%22%3A%22securityGroupid%3Asg-bp1gctspn95tkdxha%22%7D%2C%7B%22x%22%3A75.075%2C%22y%22%3A280.0875%2C%22width%22%3A171.80624%2C%22height%22%3A15.881250000000023%2C%22text%22%3A%22Internetaccessstrue%22%7D%2C%7B%22x%22%3A68.578125%2C%22y%22%3A301.02185%2C%22width%22%3A225.22497499999997%2C%22height%22%3A15.15939000000003%2C%22text%22%3A%22serverless%3A%23functionname%22%7D%2C%7B%22x%22%3A83.737495%2C%22y%22%3A321.95624%2C%22width%22%3A286.584375%2C%22height%22%3A15.159359999999992%2C%22text%22%3A%22Type%3AAliyun%3Aiserverlessa%3AFunction%22%7D%2C%7B%22x%22%3A78.68437%2C%22y%22%3A343.6125%2C%22width%22%3A94.56563%2C%22height%22%3A14.4375%2C%22text%22%3A%22Properties%3A%22%7D%2C%7B%22x%22%3A90.234375%2C%22y%22%3A364.54684%2C%22width%22%3A191.296875%2C%22height%22%3A13.715640000000008%2C%22text%22%3A%22HandLer%3Aindex.handLer%22%7D%2C%7B%22x%22%3A93.84374%2C%22y%22%3A385.48123%2C%22width%22%3A140.76562%2C%22height%22%3A13.715640000000008%2C%22text%22%3A%22Runtime%3Anodejs8%22%7D%2C%7B%22x%22%3A93.84374%2C%22y%22%3A406.41562%2C%22width%22%3A137.15624%2C%22height%22%3A14.4375%2C%22text%22%3A%22Codeurin'%2Fdist'%22%7D%2C%7B%22x%22%3A93.12187%2C%22y%22%3A427.34998%2C%22width%22%3A101.0625%2C%22height%22%3A13.715620000000001%2C%22text%22%3A%22Timeout%3A60%22%7D%2C%7B%22x%22%3A77.24062%2C%22y%22%3A448.28436%2C%22width%22%3A59.193749999999994%2C%22height%22%3A14.4375%2C%22text%22%3A%22Events%3A%22%7D%2C%7B%22x%22%3A95.2875%2C%22y%22%3A469.21872%2C%22width%22%3A101.06249%2C%22height%22%3A15.881259999999997%2C%22text%22%3A%22httpTrigger%3A%22%7D%2C%7B%22x%22%3A110.44687%2C%22y%22%3A490.1531%2C%22width%22%3A86.62499999999999%2C%22height%22%3A14.4375%2C%22text%22%3A%22Type%3AHTTP%22%7D%2C%7B%22x%22%3A109.725%2C%22y%22%3A511.80936%2C%22width%22%3A97.45312000000001%2C%22height%22%3A13.715599999999938%2C%22text%22%3A%22Properties%3A%22%7D%2C%7B%22x%22%3A127.771866%2C%22y%22%3A532.02185%2C%22width%22%3A171.084364%2C%22height%22%3A15.881250000000023%2C%22text%22%3A%22AuthType%3AANONYMOUS%22%7D%2C%7B%22x%22%3A127.771866%2C%22y%22%3A552.2344%2C%22width%22%3A202.12498399999998%2C%22height%22%3A15.881199999999922%2C%22text%22%3A%22MetHODS%3AI'GET%2CPOST%5D%22%7D%5D%2C%22style%22%3A%22none%22%2C%22search%22%3A%22ROSTemplateFormatVersion15-09-01%20Transform%3AAliyun%3Aserverless-2018-04-03%20Resources%3A%20serverless-service%20Type%3AAliyun%3A%3Aserverlessiiseryice%20Properties%2026604963136989%3Aole%2Fnew-servic78969140310-roLe%20VpcConfig%3A%20VpcId%3Avpc-bp118i032r61u5gylf3d5%20VSwitchIds%3A%20-vsw-bp15iu1qpzoabzfgt848d%20-vsw-bp1bsulnv3svr4wi9tru1%20securityGroupid%3Asg-bp1gctspn95tkdxha%20Internetaccessstrue%20serverless%3A%23functionname%20Type%3AAliyun%3Aiserverlessa%3AFunction%20Properties%3A%20HandLer%3Aindex.handLer%20Runtime%3Anodejs8%20Codeurin'%2Fdist'%20Timeout%3A60%20Events%3A%20httpTrigger%3A%20Type%3AHTTP%20Properties%3A%20AuthType%3AANONYMOUS%20MetHODS%3AI'GET%2CPOST%5D%22%2C%22width%22%3A693%2C%22height%22%3A578%7D"><span data-card-element="body"><span data-card-element="center"><span class="lake-image">
    <span class="lake-image-content lake-image-content-isvalid">
      <span data-role="detail" class="lake-image-detail">
        <span class="lake-image-meta" style="">
          <span class="lake-image-warning" style="display: none;">
            <i class="anticon anticon-exclamation-circle">
              <svg viewBox="64 64 896 896" class="" data-icon="exclamation-circle" width="1em" height="1em" fill="currentColor" aria-hidden="true">
                <path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"></path><path d="M464 688a48 48 0 1 0 96 0 48 48 0 1 0-96 0zM488 576h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"></path>
              </svg>
            </i>
          </span>
          <img data-role="image" src="https://cdn.nlark.com/yuque/0/2020/png/101638/1578998549947-1099926b-0863-4996-9025-703d61dec716.png" data-raw-src="https://cdn.nlark.com/yuque/0/2020/png/101638/1578998549947-1099926b-0863-4996-9025-703d61dec716.png" class="image lake-drag-image" alt="image.png" title="image.png" style="border: none; box-shadow: none; visibility: visible; width: 479px; height: 400px;">
          
  
  
          <span data-role="maximize" class="lake-image-editor-maximize" style="display: none;"><span class="lake-icon lake-icon-full-screen"></span></span>
          <div class="lake-image-mask"><p class="lake-image-mask-point" style="font-size: 14.437500499999999px;left: 31.040625px;top: 7.2187495px;">ROSTemplateFormatVersion15-09-01</p><p class="lake-image-mask-point" style="font-size: 13.715624000000002px;left: 44.034374px;top: 28.874998px;">Transform:Aliyun:serverless-2018-04-03</p><p class="lake-image-mask-point" style="font-size: 12.993750999999996px;left: 28.153124px;top: 49.809372px;">Resources:</p><p class="lake-image-mask-point" style="font-size: 13.715626px;left: 41.146873px;top: 70.743744px;">serverless-service</p><p class="lake-image-mask-point" style="font-size: 15.881249000000011px;left: 74.35312px;top: 90.956245px;">Type:Aliyun::serverlessiiseryice</p><p class="lake-image-mask-point" style="font-size: 13.715624999999989px;left: 61.35937px;top: 113.33437px;">Properties</p><p class="lake-image-mask-point" style="font-size: 16.603139999999996px;left: 267.09375px;top: 131.38124px;">26604963136989:ole/new-servic78969140310-roLe</p><p class="lake-image-mask-point" style="font-size: 12.99375999999998px;left: 80.12812px;top: 155.92499px;">VpcConfig:</p><p class="lake-image-mask-point" style="font-size: 15.159379999999999px;left: 111.89062px;top: 175.41562px;">VpcId:vpc-bp118i032r61u5gylf3d5</p><p class="lake-image-mask-point" style="font-size: 13.715620000000001px;left: 93.84374px;top: 196.34999px;">VSwitchIds:</p><p class="lake-image-mask-point" style="font-size: 14.4375px;left: 119.10937px;top: 218.00624px;">-vsw-bp15iu1qpzoabzfgt848d</p><p class="lake-image-mask-point" style="font-size: 15.881259999999997px;left: 110.44687px;top: 238.21873px;">-vsw-bp1bsulnv3svr4wi9tru1</p><p class="lake-image-mask-point" style="font-size: 16.60311999999999px;left: 112.612495px;top: 258.43124px;">securityGroupid:sg-bp1gctspn95tkdxha</p><p class="lake-image-mask-point" style="font-size: 15.881250000000023px;left: 75.075px;top: 280.0875px;">Internetaccessstrue</p><p class="lake-image-mask-point" style="font-size: 15.15939000000003px;left: 68.578125px;top: 301.02185px;">serverless:#functionname</p><p class="lake-image-mask-point" style="font-size: 15.159359999999992px;left: 83.737495px;top: 321.95624px;">Type:Aliyun:iserverlessa:Function</p><p class="lake-image-mask-point" style="font-size: 14.4375px;left: 78.68437px;top: 343.6125px;">Properties:</p><p class="lake-image-mask-point" style="font-size: 13.715640000000008px;left: 90.234375px;top: 364.54684px;">HandLer:index.handLer</p><p class="lake-image-mask-point" style="font-size: 13.715640000000008px;left: 93.84374px;top: 385.48123px;">Runtime:nodejs8</p><p class="lake-image-mask-point" style="font-size: 14.4375px;left: 93.84374px;top: 406.41562px;">Codeurin'/dist'</p><p class="lake-image-mask-point" style="font-size: 13.715620000000001px;left: 93.12187px;top: 427.34998px;">Timeout:60</p><p class="lake-image-mask-point" style="font-size: 14.4375px;left: 77.24062px;top: 448.28436px;">Events:</p><p class="lake-image-mask-point" style="font-size: 15.881259999999997px;left: 95.2875px;top: 469.21872px;">httpTrigger:</p><p class="lake-image-mask-point" style="font-size: 14.4375px;left: 110.44687px;top: 490.1531px;">Type:HTTP</p><p class="lake-image-mask-point" style="font-size: 13.715599999999938px;left: 109.725px;top: 511.80936px;">Properties:</p><p class="lake-image-mask-point" style="font-size: 15.881250000000023px;left: 127.771866px;top: 532.02185px;">AuthType:ANONYMOUS</p><p class="lake-image-mask-point" style="font-size: 15.881199999999922px;left: 127.771866px;top: 552.2344px;">MetHODS:I'GET,POST]</p></div>
        </span>
      </span>
    </span>
  </span></span></span></span></p><p><br></p><h1 id="E3Sfn" style="text-align: left;"><a class="lake-anchor" style="top: 13px;"><span class="lake-anchor-button lake-icon lake-icon-h1"></span></a>触发器</h1><p style="text-align: left; text-indent: 2em;"><span style="color: #333333;">触发器是触发函数执行的方式。在事件驱动的计算模型中，事件源是事件的生产者，函数是事件的处理者，而触发器提供了一种集中的和统一的方式来管理不同的事件源。在事件源中，当事件发生时，如果满足触发器定义的规则，事件源则调用触发器所对应的函数。</span></p><h2 id="h2-u89E6u53D1u5668u7684u57FAu672Cu4FE1u606F2"><a class="lake-anchor" style="top: 11px;"><span class="lake-anchor-button lake-icon lake-icon-h2"></span></a>触发器的基本信息</h2><ul><li><code>triggerName</code>：触发器名称。</li><li><code>triggerType</code>：触发器类型，例如（oss、timer、http）。</li><li><code>sourceArn</code>：触发函数执行的资源描述符，有些触发器需要设置（涉及到阿里云其他服务触发函数计算执行的，例如 OSS 触发器，SLS 触发器），有些触发器不需要设置（不涉及到阿里云其他服务触发函数计算执行的，例如定时触发器，HTTP 触发器）。例如 OSS 触发器的 sourceArn 格式为 <code>acs:oss:region:accountId:bucketName</code>。</li><li><code>invocationRole</code>：触发角色，事件源需要扮演一个角色来触发函数的执行，要求这个角色有触发函数执行的权限</li></ul><ul data-lake-indent="1"><li>关于事件源角色的详细信息请参考文章 <a href="https://help.aliyun.com/document_detail/52885.html" target="_blank" rel="noopener noreferrer">权限简介</a>。</li></ul><ul><li><code>qualifier</code>：触发的服务版本或别名。更多版本和别名的使用请参考<a href="https://help.aliyun.com/document_detail/96464.html" target="_blank" rel="noopener noreferrer">版本管理</a>。</li><li><code>triggerConfig</code>：触发器的配置信息，各触发器的配置信息请参考该触发器对应的文档。</li></ul><p><br></p><h3 id="h3-u53CCu5411u96C6u6210u89E6u53D1u5668"><a class="lake-anchor" style="top: 9px;"><span class="lake-anchor-button lake-icon lake-icon-h3"></span></a>双向集成触发器</h3><div data-card-type="block" data-lake-card="table" contenteditable="false" data-card-value="data:%7B%22rows%22%3A8%2C%22cols%22%3A3%2C%22html%22%3A%22%3Ctable%20class%3D%5C%22lake-table%5C%22%20style%3D%5C%22width%3A%20779px%3B%5C%22%3E%3Ccolgroup%3E%3Ccol%20span%3D%5C%221%5C%22%20width%3D%5C%22259%5C%22%20%2F%3E%3Ccol%20span%3D%5C%221%5C%22%20width%3D%5C%22260%5C%22%20%2F%3E%3Ccol%20span%3D%5C%221%5C%22%20width%3D%5C%22260%5C%22%20%2F%3E%3C%2Fcolgroup%3E%3Cthead%3E%3Ctr%20style%3D%5C%22background-color%3A%20%23F2F2F2%3B%20height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22text-align%3A%20left%3B%20color%3A%20%23333333%3B%5C%22%3E%E8%A7%A6%E5%8F%91%E5%99%A8%E5%90%8D%E7%A7%B0%3C%2Ftd%3E%3Ctd%20style%3D%5C%22text-align%3A%20left%3B%20color%3A%20%23333333%3B%5C%22%3E%E6%96%87%E6%A1%A3%E9%93%BE%E6%8E%A5%3C%2Ftd%3E%3Ctd%20style%3D%5C%22text-align%3A%20left%3B%20color%3A%20%23333333%3B%5C%22%3E%E7%A4%BA%E4%BE%8B%E9%93%BE%E6%8E%A5%3C%2Ftd%3E%3C%2Ftr%3E%3C%2Fthead%3E%3Ctbody%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22text-align%3A%20left%3B%5C%22%3EOSS%20%E4%BA%8B%E4%BB%B6%E8%A7%A6%E5%8F%91%E5%99%A8%3C%2Ftd%3E%3Ctd%20style%3D%5C%22text-align%3A%20left%3B%5C%22%3E%3Ca%20href%3D%5C%22https%3A%2F%2Fhelp.aliyun.com%2Fdocument_detail%2F62922.html%5C%22%20target%3D%5C%22_blank%5C%22%3EOSS%20%E4%BA%8B%E4%BB%B6%E8%A7%A6%E5%8F%91%E5%99%A8%E6%96%87%E6%A1%A3%3C%2Fa%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22text-align%3A%20left%3B%5C%22%3E%3Ca%20href%3D%5C%22https%3A%2F%2Fhelp.aliyun.com%2Fdocument_detail%2F74761.html%5C%22%20target%3D%5C%22_blank%5C%22%3E%E4%BD%BF%E7%94%A8%20OSS%20%E8%A7%A6%E5%8F%91%E5%87%BD%E6%95%B0%E8%AE%A1%E7%AE%97%E7%A4%BA%E4%BE%8B%3C%2Fa%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22text-align%3A%20left%3B%5C%22%3EHTTP%20%E8%A7%A6%E5%8F%91%E5%99%A8%3C%2Ftd%3E%3Ctd%20style%3D%5C%22text-align%3A%20left%3B%5C%22%3E%3Ca%20href%3D%5C%22https%3A%2F%2Fhelp.aliyun.com%2Fdocument_detail%2F71229.html%5C%22%20target%3D%5C%22_blank%5C%22%3EHTTP%20%E8%A7%A6%E5%8F%91%E5%99%A8%3C%2Fa%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22text-align%3A%20left%3B%5C%22%3E%3Ca%20href%3D%5C%22https%3A%2F%2Fhelp.aliyun.com%2Fdocument_detail%2F74768.html%5C%22%20target%3D%5C%22_blank%5C%22%3E%E5%9F%BA%E4%BA%8E%20HTTP%20%E8%A7%A6%E5%8F%91%E5%99%A8%E6%90%AD%E5%BB%BA%20Web%20Server%3C%2Fa%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22text-align%3A%20left%3B%5C%22%3E%E5%AE%9A%E6%97%B6%E8%A7%A6%E5%8F%91%E5%99%A8%3C%2Ftd%3E%3Ctd%20style%3D%5C%22text-align%3A%20left%3B%5C%22%3E%3Ca%20href%3D%5C%22https%3A%2F%2Fhelp.aliyun.com%2Fdocument_detail%2F68172.html%5C%22%20target%3D%5C%22_blank%5C%22%3E%E5%AE%9A%E6%97%B6%E8%A7%A6%E5%8F%91%E5%99%A8%3C%2Fa%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22text-align%3A%20left%3B%5C%22%3E%3Ca%20href%3D%5C%22https%3A%2F%2Fhelp.aliyun.com%2Fdocument_detail%2F74676.html%5C%22%20target%3D%5C%22_blank%5C%22%3E%E4%BD%BF%E7%94%A8%E5%AE%9A%E6%97%B6%E8%A7%A6%E5%8F%91%E5%99%A8%E8%A7%A6%E5%8F%91%E5%87%BD%E6%95%B0%E8%AE%A1%E7%AE%97%E7%A4%BA%E4%BE%8B%3C%2Fa%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22text-align%3A%20left%3B%5C%22%3EMNS%20%E4%B8%BB%E9%A2%98%E8%A7%A6%E5%8F%91%E5%99%A8%3C%2Ftd%3E%3Ctd%20style%3D%5C%22text-align%3A%20left%3B%5C%22%3E%3Ca%20href%3D%5C%22https%3A%2F%2Fhelp.aliyun.com%2Fdocument_detail%2F97032.html%5C%22%20target%3D%5C%22_blank%5C%22%3EMNS%20%E4%B8%BB%E9%A2%98%E8%A7%A6%E5%8F%91%E5%99%A8%3C%2Fa%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22text-align%3A%20left%3B%5C%22%3E%3Ca%20href%3D%5C%22https%3A%2F%2Fhelp.aliyun.com%2Fdocument_detail%2F97009.html%5C%22%20target%3D%5C%22_blank%5C%22%3E%E4%BD%BF%E7%94%A8%20MNS%20%E4%B8%BB%E9%A2%98%E8%A7%A6%E5%8F%91%E5%99%A8%E8%A7%A6%E5%8F%91%E5%87%BD%E6%95%B0%E8%AE%A1%E7%AE%97%E7%A4%BA%E4%BE%8B%3C%2Fa%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22text-align%3A%20left%3B%5C%22%3ETable%20Store%E8%A7%A6%E5%8F%91%E5%99%A8%3C%2Ftd%3E%3Ctd%20style%3D%5C%22text-align%3A%20left%3B%5C%22%3E%3Ca%20href%3D%5C%22https%3A%2F%2Fhelp.aliyun.com%2Fdocument_detail%2F100092.html%5C%22%20target%3D%5C%22_blank%5C%22%3ETable%20Store%E8%A7%A6%E5%8F%91%E5%99%A8%3C%2Fa%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22text-align%3A%20left%3B%5C%22%3E%3Ca%20href%3D%5C%22https%3A%2F%2Fhelp.aliyun.com%2Fdocument_detail%2F71884.html%5C%22%20target%3D%5C%22_blank%5C%22%3E%E4%BD%BF%E7%94%A8%E5%87%BD%E6%95%B0%E8%AE%A1%E7%AE%97%E5%81%9A%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%3C%2Fa%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22text-align%3A%20left%3B%5C%22%3ECDN%20%E4%BA%8B%E4%BB%B6%E8%A7%A6%E5%8F%91%E5%99%A8%3C%2Ftd%3E%3Ctd%20style%3D%5C%22text-align%3A%20left%3B%5C%22%3E%3Ca%20href%3D%5C%22https%3A%2F%2Fhelp.aliyun.com%2Fdocument_detail%2F73333.html%5C%22%20target%3D%5C%22_blank%5C%22%3ECDN%20%E4%BA%8B%E4%BB%B6%E8%A7%A6%E5%8F%91%E5%99%A8%3C%2Fa%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22text-align%3A%20left%3B%5C%22%3E%3Ca%20href%3D%5C%22https%3A%2F%2Fhelp.aliyun.com%2Fdocument_detail%2F75119.html%5C%22%20target%3D%5C%22_blank%5C%22%3ECDN%20%E4%BA%8B%E4%BB%B6%E8%A7%A6%E5%8F%91%E5%99%A8%E7%A4%BA%E4%BE%8B%3C%2Fa%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22text-align%3A%20left%3B%5C%22%3ESLS%20%E8%A7%A6%E5%8F%91%E5%99%A8%3C%2Ftd%3E%3Ctd%20style%3D%5C%22text-align%3A%20left%3B%5C%22%3E%3Ca%20href%3D%5C%22https%3A%2F%2Fhelp.aliyun.com%2Fdocument_detail%2F84386.html%5C%22%20target%3D%5C%22_blank%5C%22%3ESLS%20%E8%A7%A6%E5%8F%91%E5%99%A8%3C%2Fa%3E%3C%2Ftd%3E%3Ctd%20style%3D%5C%22text-align%3A%20left%3B%5C%22%3E%3Ca%20href%3D%5C%22https%3A%2F%2Fhelp.aliyun.com%2Fdocument_detail%2F84090.html%5C%22%20target%3D%5C%22_blank%5C%22%3E%E6%97%A5%E5%BF%97%E6%9C%8D%E5%8A%A1%E8%A7%A6%E5%8F%91%E5%99%A8%E7%A4%BA%E4%BE%8B%3C%2Fa%3E%3C%2Ftd%3E%3C%2Ftr%3E%3C%2Ftbody%3E%3C%2Ftable%3E%22%2C%22id%22%3A%22kGQXA%22%7D" id="kGQXA"><div data-card-element="body"><div data-card-element="center"><div class="lake-table-reader lake-scrollable scroll-x" style="position: relative;">
        <table class="lake-table" style="width: 779px;"><colgroup><col span="1" width="259"><col span="1" width="260"><col span="1" width="260"></colgroup><thead><tr style="background-color: #F2F2F2; height: 33px;"><td style="text-align: left; color: #333333;">触发器名称</td><td style="text-align: left; color: #333333;">文档链接</td><td style="text-align: left; color: #333333;">示例链接</td></tr></thead><tbody><tr style="height: 33px;"><td style="text-align: left;">OSS 事件触发器</td><td style="text-align: left;"><a href="https://help.aliyun.com/document_detail/62922.html" target="_blank" rel="noopener noreferrer">OSS 事件触发器文档</a></td><td style="text-align: left;"><a href="https://help.aliyun.com/document_detail/74761.html" target="_blank" rel="noopener noreferrer">使用 OSS 触发函数计算示例</a></td></tr><tr style="height: 33px;"><td style="text-align: left;">HTTP 触发器</td><td style="text-align: left;"><a href="https://help.aliyun.com/document_detail/71229.html" target="_blank" rel="noopener noreferrer">HTTP 触发器</a></td><td style="text-align: left;"><a href="https://help.aliyun.com/document_detail/74768.html" target="_blank" rel="noopener noreferrer">基于 HTTP 触发器搭建 Web Server</a></td></tr><tr style="height: 33px;"><td style="text-align: left;">定时触发器</td><td style="text-align: left;"><a href="https://help.aliyun.com/document_detail/68172.html" target="_blank" rel="noopener noreferrer">定时触发器</a></td><td style="text-align: left;"><a href="https://help.aliyun.com/document_detail/74676.html" target="_blank" rel="noopener noreferrer">使用定时触发器触发函数计算示例</a></td></tr><tr style="height: 33px;"><td style="text-align: left;">MNS 主题触发器</td><td style="text-align: left;"><a href="https://help.aliyun.com/document_detail/97032.html" target="_blank" rel="noopener noreferrer">MNS 主题触发器</a></td><td style="text-align: left;"><a href="https://help.aliyun.com/document_detail/97009.html" target="_blank" rel="noopener noreferrer">使用 MNS 主题触发器触发函数计算示例</a></td></tr><tr style="height: 33px;"><td style="text-align: left;">Table Store触发器</td><td style="text-align: left;"><a href="https://help.aliyun.com/document_detail/100092.html" target="_blank" rel="noopener noreferrer">Table Store触发器</a></td><td style="text-align: left;"><a href="https://help.aliyun.com/document_detail/71884.html" target="_blank" rel="noopener noreferrer">使用函数计算做数据清洗</a></td></tr><tr style="height: 33px;"><td style="text-align: left;">CDN 事件触发器</td><td style="text-align: left;"><a href="https://help.aliyun.com/document_detail/73333.html" target="_blank" rel="noopener noreferrer">CDN 事件触发器</a></td><td style="text-align: left;"><a href="https://help.aliyun.com/document_detail/75119.html" target="_blank" rel="noopener noreferrer">CDN 事件触发器示例</a></td></tr><tr style="height: 33px;"><td style="text-align: left;">SLS 触发器</td><td style="text-align: left;"><a href="https://help.aliyun.com/document_detail/84386.html" target="_blank" rel="noopener noreferrer">SLS 触发器</a></td><td style="text-align: left;"><a href="https://help.aliyun.com/document_detail/84090.html" target="_blank" rel="noopener noreferrer">日志服务触发器示例</a></td></tr></tbody></table>
      <div class="lake-scrollbar lake-scrollbar-x " style="left: 0px;"><div class="lake-scrollbar-trigger" style="width: 301px; display: block; left: 0px;"></div></div><div class="scrollbar-shadow-left" style="left: 0px; display: none;"></div><div class="scrollbar-shadow-right" style="left: 481px; display: block;"></div></div></div><div class="lake-embed-toolbar lake-card-toolbar lake-embed-toolbar-block" contenteditable="false"><div class="lake-embed-toolbar-group"><span class="lake-embed-toolbar-item">
    <a class="lake-embed-toolbar-btn ">
      <span class="lake-icon lake-icon-maximize"></span>
      
    </a>
  </span><span class="lake-embed-toolbar-item">
    <a class="lake-embed-toolbar-btn ">
      <span class="lake-icon lake-icon-link"></span>
      
    </a>
  </span></div></div></div></div><h3 id="h3-u5355u5411u96C6u6210u89E6u53D1u5668"><a class="lake-anchor" style="top: 9px;"><span class="lake-anchor-button lake-icon lake-icon-h3"></span></a>单向集成触发器</h3><div data-card-type="block" data-lake-card="table" contenteditable="false" data-card-value="data:%7B%22rows%22%3A4%2C%22cols%22%3A2%2C%22html%22%3A%22%3Ctable%20class%3D%5C%22lake-table%5C%22%20style%3D%5C%22width%3A%20779px%3B%5C%22%3E%3Ccolgroup%3E%3Ccol%20span%3D%5C%221%5C%22%20width%3D%5C%22389%5C%22%20%2F%3E%3Ccol%20span%3D%5C%221%5C%22%20width%3D%5C%22390%5C%22%20%2F%3E%3C%2Fcolgroup%3E%3Cthead%3E%3Ctr%20style%3D%5C%22background-color%3A%20%23F2F2F2%3B%20height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22text-align%3A%20left%3B%20color%3A%20%23333333%3B%5C%22%3E%E8%A7%A6%E5%8F%91%E5%99%A8%E5%90%8D%E7%A7%B0%3C%2Ftd%3E%3Ctd%20style%3D%5C%22text-align%3A%20left%3B%20color%3A%20%23333333%3B%5C%22%3E%E7%A4%BA%E4%BE%8B%E9%93%BE%E6%8E%A5%3C%2Ftd%3E%3C%2Ftr%3E%3C%2Fthead%3E%3Ctbody%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22text-align%3A%20left%3B%5C%22%3EAPI%20%E7%BD%91%E5%85%B3%E8%A7%A6%E5%8F%91%E5%99%A8%3C%2Ftd%3E%3Ctd%20style%3D%5C%22text-align%3A%20left%3B%5C%22%3E%3Ca%20href%3D%5C%22https%3A%2F%2Fhelp.aliyun.com%2Fdocument_detail%2F54788.html%5C%22%20target%3D%5C%22_blank%5C%22%3EAPI%20%E7%BD%91%E5%85%B3%E8%A7%A6%E5%8F%91%E5%99%A8%3C%2Fa%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22text-align%3A%20left%3B%5C%22%3EDatahub%20%E8%A7%A6%E5%8F%91%E5%99%A8%3C%2Ftd%3E%3Ctd%20style%3D%5C%22text-align%3A%20left%3B%5C%22%3E%3Ca%20href%3D%5C%22https%3A%2F%2Fhelp.aliyun.com%2Fdocument_detail%2F60325.html%5C%22%20target%3D%5C%22_blank%5C%22%3EDatahub%20%E8%A7%A6%E5%8F%91%E5%99%A8%3C%2Fa%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20style%3D%5C%22height%3A%2033px%3B%5C%22%3E%3Ctd%20style%3D%5C%22text-align%3A%20left%3B%5C%22%3EIoT%20%E8%A7%A6%E5%8F%91%E5%99%A8%3C%2Ftd%3E%3Ctd%20style%3D%5C%22text-align%3A%20left%3B%5C%22%3E%3Ca%20href%3D%5C%22https%3A%2F%2Fhelp.aliyun.com%2Fdocument_detail%2F64234.html%5C%22%20target%3D%5C%22_blank%5C%22%3EIoT%20%E8%A7%A6%E5%8F%91%E5%99%A8%3C%2Fa%3E%3C%2Ftd%3E%3C%2Ftr%3E%3C%2Ftbody%3E%3C%2Ftable%3E%22%2C%22id%22%3A%22xMr9h%22%7D" id="xMr9h"><div data-card-element="body"><div data-card-element="center"><div class="lake-table-reader lake-scrollable scroll-x" style="position: relative;">
        <table class="lake-table" style="width: 779px;"><colgroup><col span="1" width="389"><col span="1" width="390"></colgroup><thead><tr style="background-color: #F2F2F2; height: 33px;"><td style="text-align: left; color: #333333;">触发器名称</td><td style="text-align: left; color: #333333;">示例链接</td></tr></thead><tbody><tr style="height: 33px;"><td style="text-align: left;">API 网关触发器</td><td style="text-align: left;"><a href="https://help.aliyun.com/document_detail/54788.html" target="_blank" rel="noopener noreferrer">API 网关触发器</a></td></tr><tr style="height: 33px;"><td style="text-align: left;">Datahub 触发器</td><td style="text-align: left;"><a href="https://help.aliyun.com/document_detail/60325.html" target="_blank" rel="noopener noreferrer">Datahub 触发器</a></td></tr><tr style="height: 33px;"><td style="text-align: left;">IoT 触发器</td><td style="text-align: left;"><a href="https://help.aliyun.com/document_detail/64234.html" target="_blank" rel="noopener noreferrer">IoT 触发器</a></td></tr></tbody></table>
      <div class="lake-scrollbar lake-scrollbar-x " style="left: 0px;"><div class="lake-scrollbar-trigger" style="width: 301px; display: block; left: 0px;"></div></div><div class="scrollbar-shadow-left" style="left: 0px; display: none;"></div><div class="scrollbar-shadow-right" style="left: 481px; display: block;"></div></div></div><div class="lake-embed-toolbar lake-card-toolbar lake-embed-toolbar-block" contenteditable="false"><div class="lake-embed-toolbar-group"><span class="lake-embed-toolbar-item">
    <a class="lake-embed-toolbar-btn ">
      <span class="lake-icon lake-icon-maximize"></span>
      
    </a>
  </span><span class="lake-embed-toolbar-item">
    <a class="lake-embed-toolbar-btn ">
      <span class="lake-icon lake-icon-link"></span>
      
    </a>
  </span></div></div></div></div><p><br></p><p>在template.yml中配置触发器</p><p><span data-card-type="inline" data-lake-card="image" contenteditable="false" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F101638%2F1578999032921-ada8d3db-5199-4328-a029-e96aaf712f6d.png%22%2C%22originWidth%22%3A693%2C%22originHeight%22%3A578%2C%22name%22%3A%22image.png%22%2C%22size%22%3A84110%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A31.040625%2C%22y%22%3A7.2187495%2C%22width%22%3A300.299975%2C%22height%22%3A14.437500499999999%2C%22text%22%3A%22ROSTemplateFormatVersion15-09-01%22%7D%2C%7B%22x%22%3A44.034374%2C%22y%22%3A28.874998%2C%22width%22%3A298.13435599999997%2C%22height%22%3A13.715624000000002%2C%22text%22%3A%22Transform%3AAliyun%3Aserverless-2018-04-03%22%7D%2C%7B%22x%22%3A28.153124%2C%22y%22%3A49.809372%2C%22width%22%3A97.453126%2C%22height%22%3A12.993750999999996%2C%22text%22%3A%22Resources%3A%22%7D%2C%7B%22x%22%3A41.146873%2C%22y%22%3A70.743744%2C%22width%22%3A168.196857%2C%22height%22%3A13.715626%2C%22text%22%3A%22serverless-service%22%7D%2C%7B%22x%22%3A74.35312%2C%22y%22%3A90.956245%2C%22width%22%3A277.92188%2C%22height%22%3A15.881249000000011%2C%22text%22%3A%22Type%3AAliyun%3A%3Aserverlessiiseryice%22%7D%2C%7B%22x%22%3A61.35937%2C%22y%22%3A113.33437%2C%22width%22%3A95.28750000000001%2C%22height%22%3A13.715624999999989%2C%22text%22%3A%22Properties%22%7D%2C%7B%22x%22%3A267.09375%2C%22y%22%3A131.38124%2C%22width%22%3A370.32185000000004%2C%22height%22%3A16.603139999999996%2C%22text%22%3A%2226604963136989%3Aole%2Fnew-servic78969140310-roLe%22%7D%2C%7B%22x%22%3A80.12812%2C%22y%22%3A155.92499%2C%22width%22%3A84.45938000000001%2C%22height%22%3A12.99375999999998%2C%22text%22%3A%22VpcConfig%3A%22%7D%2C%7B%22x%22%3A111.89062%2C%22y%22%3A175.41562%2C%22width%22%3A246.15938%2C%22height%22%3A15.159379999999999%2C%22text%22%3A%22VpcId%3Avpc-bp118i032r61u5gylf3d5%22%7D%2C%7B%22x%22%3A93.84374%2C%22y%22%3A196.34999%2C%22width%22%3A96.73125999999999%2C%22height%22%3A13.715620000000001%2C%22text%22%3A%22VSwitchIds%3A%22%7D%2C%7B%22x%22%3A119.10937%2C%22y%22%3A218.00624%2C%22width%22%3A223.78125%2C%22height%22%3A14.4375%2C%22text%22%3A%22-vsw-bp15iu1qpzoabzfgt848d%22%7D%2C%7B%22x%22%3A110.44687%2C%22y%22%3A238.21873%2C%22width%22%3A234.60937%2C%22height%22%3A15.881259999999997%2C%22text%22%3A%22-vsw-bp1bsulnv3svr4wi9tru1%22%7D%2C%7B%22x%22%3A112.612495%2C%22y%22%3A258.43124%2C%22width%22%3A275.034355%2C%22height%22%3A16.60311999999999%2C%22text%22%3A%22securityGroupid%3Asg-bp1gctspn95tkdxha%22%7D%2C%7B%22x%22%3A75.075%2C%22y%22%3A280.0875%2C%22width%22%3A171.80624%2C%22height%22%3A15.881250000000023%2C%22text%22%3A%22Internetaccessstrue%22%7D%2C%7B%22x%22%3A68.578125%2C%22y%22%3A301.02185%2C%22width%22%3A225.22497499999997%2C%22height%22%3A15.15939000000003%2C%22text%22%3A%22serverless%3A%23functionname%22%7D%2C%7B%22x%22%3A83.737495%2C%22y%22%3A321.95624%2C%22width%22%3A286.584375%2C%22height%22%3A15.159359999999992%2C%22text%22%3A%22Type%3AAliyun%3Aiserverlessa%3AFunction%22%7D%2C%7B%22x%22%3A78.68437%2C%22y%22%3A343.6125%2C%22width%22%3A94.56563%2C%22height%22%3A14.4375%2C%22text%22%3A%22Properties%3A%22%7D%2C%7B%22x%22%3A90.234375%2C%22y%22%3A364.54684%2C%22width%22%3A191.296875%2C%22height%22%3A13.715640000000008%2C%22text%22%3A%22HandLer%3Aindex.handLer%22%7D%2C%7B%22x%22%3A93.84374%2C%22y%22%3A385.48123%2C%22width%22%3A140.76562%2C%22height%22%3A13.715640000000008%2C%22text%22%3A%22Runtime%3Anodejs8%22%7D%2C%7B%22x%22%3A93.84374%2C%22y%22%3A406.41562%2C%22width%22%3A137.15624%2C%22height%22%3A14.4375%2C%22text%22%3A%22Codeurin'%2Fdist'%22%7D%2C%7B%22x%22%3A93.12187%2C%22y%22%3A427.34998%2C%22width%22%3A101.0625%2C%22height%22%3A13.715620000000001%2C%22text%22%3A%22Timeout%3A60%22%7D%2C%7B%22x%22%3A77.24062%2C%22y%22%3A448.28436%2C%22width%22%3A59.193749999999994%2C%22height%22%3A14.4375%2C%22text%22%3A%22Events%3A%22%7D%2C%7B%22x%22%3A95.2875%2C%22y%22%3A469.21872%2C%22width%22%3A101.06249%2C%22height%22%3A15.881259999999997%2C%22text%22%3A%22httpTrigger%3A%22%7D%2C%7B%22x%22%3A110.44687%2C%22y%22%3A490.1531%2C%22width%22%3A86.62499999999999%2C%22height%22%3A14.4375%2C%22text%22%3A%22Type%3AHTTP%22%7D%2C%7B%22x%22%3A109.725%2C%22y%22%3A511.80936%2C%22width%22%3A97.45312000000001%2C%22height%22%3A13.715599999999938%2C%22text%22%3A%22Properties%3A%22%7D%2C%7B%22x%22%3A127.771866%2C%22y%22%3A532.02185%2C%22width%22%3A171.084364%2C%22height%22%3A15.881250000000023%2C%22text%22%3A%22AuthType%3AANONYMOUS%22%7D%2C%7B%22x%22%3A127.771866%2C%22y%22%3A552.2344%2C%22width%22%3A202.12498399999998%2C%22height%22%3A15.881199999999922%2C%22text%22%3A%22MetHODS%3AI'GET%2CPOST%5D%22%7D%5D%2C%22style%22%3A%22none%22%2C%22search%22%3A%22ROSTemplateFormatVersion15-09-01%20Transform%3AAliyun%3Aserverless-2018-04-03%20Resources%3A%20serverless-service%20Type%3AAliyun%3A%3Aserverlessiiseryice%20Properties%2026604963136989%3Aole%2Fnew-servic78969140310-roLe%20VpcConfig%3A%20VpcId%3Avpc-bp118i032r61u5gylf3d5%20VSwitchIds%3A%20-vsw-bp15iu1qpzoabzfgt848d%20-vsw-bp1bsulnv3svr4wi9tru1%20securityGroupid%3Asg-bp1gctspn95tkdxha%20Internetaccessstrue%20serverless%3A%23functionname%20Type%3AAliyun%3Aiserverlessa%3AFunction%20Properties%3A%20HandLer%3Aindex.handLer%20Runtime%3Anodejs8%20Codeurin'%2Fdist'%20Timeout%3A60%20Events%3A%20httpTrigger%3A%20Type%3AHTTP%20Properties%3A%20AuthType%3AANONYMOUS%20MetHODS%3AI'GET%2CPOST%5D%22%2C%22width%22%3A693%2C%22height%22%3A578%7D"><span data-card-element="body"><span data-card-element="center"><span class="lake-image">
    <span class="lake-image-content lake-image-content-isvalid">
      <span data-role="detail" class="lake-image-detail">
        <span class="lake-image-meta" style="">
          <span class="lake-image-warning" style="display: none;">
            <i class="anticon anticon-exclamation-circle">
              <svg viewBox="64 64 896 896" class="" data-icon="exclamation-circle" width="1em" height="1em" fill="currentColor" aria-hidden="true">
                <path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"></path><path d="M464 688a48 48 0 1 0 96 0 48 48 0 1 0-96 0zM488 576h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"></path>
              </svg>
            </i>
          </span>
          <img data-role="image" src="https://cdn.nlark.com/yuque/0/2020/png/101638/1578999032921-ada8d3db-5199-4328-a029-e96aaf712f6d.png" data-raw-src="https://cdn.nlark.com/yuque/0/2020/png/101638/1578999032921-ada8d3db-5199-4328-a029-e96aaf712f6d.png" class="image lake-drag-image" alt="image.png" title="image.png" style="border: none; box-shadow: none; visibility: visible; width: 479px; height: 400px;">
          
  
  
          <span data-role="maximize" class="lake-image-editor-maximize" style="display: none;"><span class="lake-icon lake-icon-full-screen"></span></span>
          <div class="lake-image-mask"><p class="lake-image-mask-point" style="font-size: 14.437500499999999px;left: 31.040625px;top: 7.2187495px;">ROSTemplateFormatVersion15-09-01</p><p class="lake-image-mask-point" style="font-size: 13.715624000000002px;left: 44.034374px;top: 28.874998px;">Transform:Aliyun:serverless-2018-04-03</p><p class="lake-image-mask-point" style="font-size: 12.993750999999996px;left: 28.153124px;top: 49.809372px;">Resources:</p><p class="lake-image-mask-point" style="font-size: 13.715626px;left: 41.146873px;top: 70.743744px;">serverless-service</p><p class="lake-image-mask-point" style="font-size: 15.881249000000011px;left: 74.35312px;top: 90.956245px;">Type:Aliyun::serverlessiiseryice</p><p class="lake-image-mask-point" style="font-size: 13.715624999999989px;left: 61.35937px;top: 113.33437px;">Properties</p><p class="lake-image-mask-point" style="font-size: 16.603139999999996px;left: 267.09375px;top: 131.38124px;">26604963136989:ole/new-servic78969140310-roLe</p><p class="lake-image-mask-point" style="font-size: 12.99375999999998px;left: 80.12812px;top: 155.92499px;">VpcConfig:</p><p class="lake-image-mask-point" style="font-size: 15.159379999999999px;left: 111.89062px;top: 175.41562px;">VpcId:vpc-bp118i032r61u5gylf3d5</p><p class="lake-image-mask-point" style="font-size: 13.715620000000001px;left: 93.84374px;top: 196.34999px;">VSwitchIds:</p><p class="lake-image-mask-point" style="font-size: 14.4375px;left: 119.10937px;top: 218.00624px;">-vsw-bp15iu1qpzoabzfgt848d</p><p class="lake-image-mask-point" style="font-size: 15.881259999999997px;left: 110.44687px;top: 238.21873px;">-vsw-bp1bsulnv3svr4wi9tru1</p><p class="lake-image-mask-point" style="font-size: 16.60311999999999px;left: 112.612495px;top: 258.43124px;">securityGroupid:sg-bp1gctspn95tkdxha</p><p class="lake-image-mask-point" style="font-size: 15.881250000000023px;left: 75.075px;top: 280.0875px;">Internetaccessstrue</p><p class="lake-image-mask-point" style="font-size: 15.15939000000003px;left: 68.578125px;top: 301.02185px;">serverless:#functionname</p><p class="lake-image-mask-point" style="font-size: 15.159359999999992px;left: 83.737495px;top: 321.95624px;">Type:Aliyun:iserverlessa:Function</p><p class="lake-image-mask-point" style="font-size: 14.4375px;left: 78.68437px;top: 343.6125px;">Properties:</p><p class="lake-image-mask-point" style="font-size: 13.715640000000008px;left: 90.234375px;top: 364.54684px;">HandLer:index.handLer</p><p class="lake-image-mask-point" style="font-size: 13.715640000000008px;left: 93.84374px;top: 385.48123px;">Runtime:nodejs8</p><p class="lake-image-mask-point" style="font-size: 14.4375px;left: 93.84374px;top: 406.41562px;">Codeurin'/dist'</p><p class="lake-image-mask-point" style="font-size: 13.715620000000001px;left: 93.12187px;top: 427.34998px;">Timeout:60</p><p class="lake-image-mask-point" style="font-size: 14.4375px;left: 77.24062px;top: 448.28436px;">Events:</p><p class="lake-image-mask-point" style="font-size: 15.881259999999997px;left: 95.2875px;top: 469.21872px;">httpTrigger:</p><p class="lake-image-mask-point" style="font-size: 14.4375px;left: 110.44687px;top: 490.1531px;">Type:HTTP</p><p class="lake-image-mask-point" style="font-size: 13.715599999999938px;left: 109.725px;top: 511.80936px;">Properties:</p><p class="lake-image-mask-point" style="font-size: 15.881250000000023px;left: 127.771866px;top: 532.02185px;">AuthType:ANONYMOUS</p><p class="lake-image-mask-point" style="font-size: 15.881199999999922px;left: 127.771866px;top: 552.2344px;">MetHODS:I'GET,POST]</p></div>
        </span>
      </span>
    </span>
  </span></span></span></span></p><p><br></p><p><br></p><h1 id="Xj2Sp"><a class="lake-anchor" style="top: 13px;"><span class="lake-anchor-button lake-icon lake-icon-h1"></span></a><br></h1><h1 id="KoaCN"><a class="lake-anchor" style="top: 13px;"><span class="lake-anchor-button lake-icon lake-icon-h1"></span></a>如何实现一个简单的函数计算</h1><p><br></p><h2 id="rSnaV"><a class="lake-anchor" style="top: 11px;"><span class="lake-anchor-button lake-icon lake-icon-h2"></span></a>创建函数入口</h2><ol><li><code><span style="color: #000000;">exports</span><span style="color: #666600;">.</span><span style="color: #000000;">handler </span><span style="color: #666600;">=</span><span style="color: #000000;"> </span><strong><strong>function</strong></strong><span style="color: #666600;"><span>(</span></span><span style="color: #000000;"><span style="color: #A65926;">event</span></span><span style="color: #666600;"><span style="color: #A65926;">,</span></span><span style="color: #000000;"><span style="color: #A65926;"> context</span></span><span style="color: #666600;"><span style="color: #A65926;">,</span></span><span style="color: #000000;"><span style="color: #A65926;"> callback</span></span><span style="color: #666600;"><span>)</span></span><span style="color: #000000;"> </span><span style="color: #666600;">{</span></code></li><li><code><span style="color: #000000;">  &nbsp; &nbsp;&nbsp;callback</span><span style="color: #666600;">(</span><strong><span style="color: #A65926;">null</span></strong><span style="color: #666600;">,</span><span style="color: #000000;"> </span><span style="color: #008800;"><span style="color: #918B3B;">'hello world'</span></span><span style="color: #666600;">);</span></code></li><li><code><span style="color: #666600;">};</span></code></li></ol><h4 id="h4-u51FDu6570u540D"><a class="lake-anchor" style="top: 7px;"><span class="lake-anchor-button lake-icon lake-icon-h4"></span></a>函数名</h4><ul><li><code>exports.handler</code> 需要与创建函数时的 “handler” 字段相对应：例如创建函数时指定的 handler 为<code>index.handler</code>，那么函数计算会去加载 <code>index.js</code> 文件中定义的 <code>handler</code> 函数。</li></ul><h4 id="h4-event-"><a class="lake-anchor" style="top: 7px;"><span class="lake-anchor-button lake-icon lake-icon-h4"></span></a>event 参数</h4><ul><li>event 参数是您调用函数时传入的数据，其类型是 <code>Buffer</code>，是函数的输入参数。</li><li>函数不对它的内容进行任何解释，传递给函数的 event 是 <code>Buffer</code> 类型。您在函数中可以根据实际情况对 event 进行转换：例如输入数据是一个 JSON string ，您可以把它转换成一个 <code>object</code> :例如：传入的 event :</li></ul><ol data-lake-indent="1"><li><code><span style="color: #666600;">{</span></code></li><li><code><span style="color: #008800;"><span style="color: #918B3B;">"key"</span></span><span style="color: #666600;">:</span><span style="color: #000000;"> </span><span style="color: #008800;"><span style="color: #918B3B;">"value"</span></span></code></li><li><code><span style="color: #666600;">}</span></code></li></ol><ul><li>函数代码：</li></ul><ol data-lake-indent="1"><li><code><span style="color: #000000;">exports</span><span style="color: #666600;">.</span><span style="color: #000000;">handler </span><span style="color: #666600;">=</span><span style="color: #000000;"> </span><strong><strong>function</strong></strong><span style="color: #666600;"><span>(</span></span><span style="color: #000000;"><span style="color: #A65926;">event</span></span><span style="color: #666600;"><span style="color: #A65926;">,</span></span><span style="color: #000000;"><span style="color: #A65926;"> context</span></span><span style="color: #666600;"><span style="color: #A65926;">,</span></span><span style="color: #000000;"><span style="color: #A65926;"> callback</span></span><span style="color: #666600;"><span>)</span></span><span style="color: #000000;"> </span><span style="color: #666600;">{</span></code></li><li><code><strong><strong>var</strong></strong><span style="color: #000000;"> eventObj </span><span style="color: #666600;">=</span><span style="color: #000000;"> <strong>JSON</strong></span><span style="color: #666600;">.</span><span style="color: #000000;">parse</span><span style="color: #666600;">(</span><span style="color: #000000;">event</span><span style="color: #666600;">.</span><span style="color: #000000;">toString</span><span style="color: #666600;">());</span></code></li><li><code><span style="color: #000000;">callback</span><span style="color: #666600;">(</span><strong><span style="color: #A65926;">null</span></strong><span style="color: #666600;">,</span><span style="color: #000000;"> eventObj</span><span style="color: #666600;">[</span><span style="color: #008800;"><span style="color: #918B3B;">'key'</span></span><span style="color: #666600;">]);</span></code></li><li><code><span style="color: #666600;">};</span></code></li></ol><h4 id="h4-context-"><a class="lake-anchor" style="top: 7px;"><span class="lake-anchor-button lake-icon lake-icon-h4"></span></a>context 参数</h4><ul><li>context 参数中包含一些函数的运行时信息（例如 request id / 临时 AK 等）。您在代码中可以使用这些信息。其类型是 <code>object</code></li></ul><h2 id="xXcPj"><a class="lake-anchor" style="top: 11px;"><span class="lake-anchor-button lake-icon lake-icon-h2"></span></a>创建初始化函数initializer</h2><p style="text-indent: 2em;"><span style="color: #333333;">Initializer 是函数的初始化逻辑入口，不同于请求处理逻辑入口的 handler。在有函数初始化的需求场景中，设置了 Initializer 后，函数计算首先调用 initializer 完成函数的初始化，成功后再调用 handler 处理请求；没有函数初始化的需求则可以跳过 initializer，直接调用 handler 处理请求。</span></p><p><span style="color: #333333;"><br></span></p><ol><li><code><span style="color: #000000;">exports</span><span style="color: #666600;">.</span><span style="color: #000000;">my_initializer </span><span style="color: #666600;">=</span><span style="color: #000000;"> </span><strong>function</strong><span style="color: #666600;">(</span><span style="color: #000000;">context</span><span style="color: #666600;">,</span><span style="color: #000000;"> callback</span><span style="color: #666600;">)</span><span style="color: #000000;"> </span><span style="color: #666600;">{</span></code></li><li><code><span style="color: #000000;">    console</span><span style="color: #666600;">.</span><span style="color: #000000;">log</span><span style="color: #666600;">(</span><span style="color: #008800;">'hello world'</span><span style="color: #666600;">);</span></code></li><li><code><span style="color: #000000;">    callback</span><span style="color: #666600;">(</span><strong>null</strong><span style="color: #666600;">,</span><span style="color: #000000;"> </span><span style="color: #008800;">""</span><span style="color: #666600;">);</span></code></li><li><code><span style="color: #666600;">};</span></code></li></ol><p style="text-indent: 2em;"><br></p><ul><li>执行时机<br>运行函数逻辑的进程称之为函数实例，运行在容器内。系统会根据用户负载伸缩函数实例。每当有新函数实例创建时，系统会首先调用 initializer。系统保证一定 initializer 执行成功后才会执行 handler 逻辑。<br></li><li>最多成功执行一次<br>系统保证每个函数实例启动后只会成功执行一次 initializer 。如果执行失败，那么该函数实例在收到 Invoke 请求之后都会先执行 initializer。一旦执行成功，那么该实例的生命周期内不会再执行 initializer ，收到 Invoke 请求之后只执行请求处理函数。</li></ul><p><br></p><p><span style="color: #F5222D;">在nodejs中</span><span style="color: #F5222D;">必须调用callback，否则会超时。</span></p><p><br></p><h1 id="WgrJB"><a class="lake-anchor" style="top: 13px;"><span class="lake-anchor-button lake-icon lake-icon-h1"></span></a>如何实现一个http请求</h1><p><br></p><p><span>使用HTTP 触发器实现一个http请求。</span><span style="color: #333333;">HTTP 触发器是众多函数计算触发器中的一种，通过发送 HTTP 请求触发函数执行。主要适用于快速构建 Web 服务等场景。HTTP 触发器支持 HEAD、POST、PUT、GET 和 DELETE 方式触发函数。</span></p><p><span style="color: #333333;">使用限制：</span></p><ul><li>函数一旦设置 HTTP 触发器后不能设置其他类型触发器。</li><li>每个函数只能创建一个 HTTP 触发器。</li></ul><p><br></p><h2 id="lIjuo"><a class="lake-anchor" style="top: 11px;"><span class="lake-anchor-button lake-icon lake-icon-h2"></span></a>使用原生的函数计算实现</h2><p>函数计算提供了直接实现http请求的方法</p><h3 id="KgWfq"><a class="lake-anchor" style="top: 9px;"><span class="lake-anchor-button lake-icon lake-icon-h3"></span></a><span style="color: #333333;">创建入口函数</span></h3><ol><li><code><strong>var</strong><span style="color: #000000;"> getRawBody </span><span style="color: #666600;">=</span><span style="color: #000000;"> </span><strong>require</strong><span style="color: #666600;">(</span><span style="color: #008800;">'raw-body'</span><span style="color: #666600;">)</span></code></li><li><code><strong>module</strong><span style="color: #666600;">.</span><span style="color: #000000;">exports</span><span style="color: #666600;">.</span><span style="color: #000000;">handler </span><span style="color: #666600;">=</span><span style="color: #000000;"> </span><strong>function</strong><span style="color: #000000;"> </span><span style="color: #666600;">(</span><span style="color: #000000;">request</span><span style="color: #666600;">,</span><span style="color: #000000;"> response</span><span style="color: #666600;">,</span><span style="color: #000000;"> context</span><span style="color: #666600;">)</span><span style="color: #000000;"> </span><span style="color: #666600;">{</span></code></li><li><code><span style="color: #000000;">    </span><span style="color: #880000;">// get requset header</span></code></li><li><code><span style="color: #000000;">    </span><strong>var</strong><span style="color: #000000;"> reqHeader </span><span style="color: #666600;">=</span><span style="color: #000000;"> request</span><span style="color: #666600;">.</span><span style="color: #000000;">headers</span></code></li><li><code><span style="color: #000000;">    </span><strong>var</strong><span style="color: #000000;"> headerStr </span><span style="color: #666600;">=</span><span style="color: #000000;"> </span><span style="color: #008800;">' '</span></code></li><li><code><span style="color: #000000;">    </span><strong>for</strong><span style="color: #000000;"> </span><span style="color: #666600;">(</span><strong>var</strong><span style="color: #000000;"> key </span><strong>in</strong><span style="color: #000000;"> reqHeader</span><span style="color: #666600;">)</span><span style="color: #000000;"> </span><span style="color: #666600;">{</span></code></li><li><code><span style="color: #000000;">        headerStr </span><span style="color: #666600;">+=</span><span style="color: #000000;"> key </span><span style="color: #666600;">+</span><span style="color: #000000;"> </span><span style="color: #008800;">':'</span><span style="color: #000000;"> </span><span style="color: #666600;">+</span><span style="color: #000000;"> reqHeader</span><span style="color: #666600;">[</span><span style="color: #000000;">key</span><span style="color: #666600;">]</span><span style="color: #000000;"> </span><span style="color: #666600;">+</span><span style="color: #000000;"> </span><span style="color: #008800;">'  '</span></code></li><li><code><span style="color: #000000;">    </span><span style="color: #666600;">};</span></code></li><li><br></li><li><code><span style="color: #000000;">    </span><span style="color: #880000;">// get request info</span></code></li><li><code><span style="color: #000000;">    </span><strong>var</strong><span style="color: #000000;"> url </span><span style="color: #666600;">=</span><span style="color: #000000;"> request</span><span style="color: #666600;">.</span><span style="color: #000000;">url</span></code></li><li><code><span style="color: #000000;">    </span><strong>var</strong><span style="color: #000000;"> path </span><span style="color: #666600;">=</span><span style="color: #000000;"> request</span><span style="color: #666600;">.</span><span style="color: #000000;">path</span></code></li><li><code><span style="color: #000000;">    </span><strong>var</strong><span style="color: #000000;"> queries </span><span style="color: #666600;">=</span><span style="color: #000000;"> request</span><span style="color: #666600;">.</span><span style="color: #000000;">queries</span></code></li><li><code><span style="color: #000000;">    </span><strong>var</strong><span style="color: #000000;"> queryStr </span><span style="color: #666600;">=</span><span style="color: #000000;"> </span><span style="color: #008800;">''</span></code></li><li><code><span style="color: #000000;">    </span><strong>for</strong><span style="color: #000000;"> </span><span style="color: #666600;">(</span><strong>var</strong><span style="color: #000000;"> param </span><strong>in</strong><span style="color: #000000;"> queries</span><span style="color: #666600;">)</span><span style="color: #000000;"> </span><span style="color: #666600;">{</span></code></li><li><code><span style="color: #000000;">        queryStr </span><span style="color: #666600;">+=</span><span style="color: #000000;"> param </span><span style="color: #666600;">+</span><span style="color: #000000;"> </span><span style="color: #008800;">"="</span><span style="color: #000000;"> </span><span style="color: #666600;">+</span><span style="color: #000000;"> queries</span><span style="color: #666600;">[</span><span style="color: #000000;">param</span><span style="color: #666600;">]</span><span style="color: #000000;"> </span><span style="color: #666600;">+</span><span style="color: #000000;"> </span><span style="color: #008800;">'  '</span></code></li><li><code><span style="color: #000000;">    </span><span style="color: #666600;">};</span></code></li><li><code><span style="color: #000000;">    </span><strong>var</strong><span style="color: #000000;"> method </span><span style="color: #666600;">=</span><span style="color: #000000;"> request</span><span style="color: #666600;">.</span><span style="color: #000000;">method</span></code></li><li><code><span style="color: #000000;">    </span><strong>var</strong><span style="color: #000000;"> clientIP </span><span style="color: #666600;">=</span><span style="color: #000000;"> request</span><span style="color: #666600;">.</span><span style="color: #000000;">clientIP</span></code></li><li><br></li><li><code><span style="color: #000000;">    </span><span style="color: #880000;">// get request body</span></code></li><li><code><span style="color: #000000;">    getRawBody</span><span style="color: #666600;">(</span><span style="color: #000000;">request</span><span style="color: #666600;">,</span><span style="color: #000000;"> </span><strong>function</strong><span style="color: #000000;"> </span><span style="color: #666600;">(</span><span style="color: #000000;">err</span><span style="color: #666600;">,</span><span style="color: #000000;"> data</span><span style="color: #666600;">)</span><span style="color: #000000;"> </span><span style="color: #666600;">{</span></code></li><li><code><span style="color: #000000;">        </span><strong>var</strong><span style="color: #000000;"> body </span><span style="color: #666600;">=</span><span style="color: #000000;"> data</span></code></li><li><code><span style="color: #000000;">        </span><span style="color: #880000;">// you can deal with your own logic here</span></code></li><li><br></li><li><code><span style="color: #000000;">        </span><span style="color: #880000;">// set response</span></code></li><li><code><span style="color: #000000;">        </span><span style="color: #880000;">// var respBody = new Buffer('requestURI' + requestURI + ' path' + path +  ' method' + method + ' clientIP' + clientIP)</span></code></li><li><code><span style="color: #000000;">        </span><strong>var</strong><span style="color: #000000;"> respBody </span><span style="color: #666600;">=</span><span style="color: #000000;"> </span><strong>new</strong><span style="color: #000000;"> </span><span style="color: #660066;">Buffer</span><span style="color: #666600;">(</span><span style="color: #008800;">'requestHeader:'</span><span style="color: #000000;"> </span><span style="color: #666600;">+</span><span style="color: #000000;"> headerStr </span><span style="color: #666600;">+</span><span style="color: #000000;"> </span><span style="color: #008800;">'\n'</span><span style="color: #000000;"> </span><span style="color: #666600;">+</span><span style="color: #000000;"> </span><span style="color: #008800;">'url: '</span><span style="color: #000000;"> </span><span style="color: #666600;">+</span><span style="color: #000000;"> url </span><span style="color: #666600;">+</span><span style="color: #000000;"> </span><span style="color: #008800;">'\n'</span><span style="color: #000000;"> </span><span style="color: #666600;">+</span><span style="color: #000000;"> </span><span style="color: #008800;">'path: '</span><span style="color: #000000;"> </span><span style="color: #666600;">+</span><span style="color: #000000;"> path </span><span style="color: #666600;">+</span><span style="color: #000000;"> </span><span style="color: #008800;">'\n'</span><span style="color: #000000;"> </span><span style="color: #666600;">+</span><span style="color: #000000;"> </span><span style="color: #008800;">'queries: '</span><span style="color: #000000;"> </span><span style="color: #666600;">+</span><span style="color: #000000;"> queryStr </span><span style="color: #666600;">+</span><span style="color: #000000;"> </span><span style="color: #008800;">'\n'</span><span style="color: #000000;"> </span><span style="color: #666600;">+</span><span style="color: #000000;"> </span><span style="color: #008800;">'method: '</span><span style="color: #000000;"> </span><span style="color: #666600;">+</span><span style="color: #000000;"> method </span><span style="color: #666600;">+</span><span style="color: #000000;"> </span><span style="color: #008800;">'\n'</span><span style="color: #000000;"> </span><span style="color: #666600;">+</span><span style="color: #000000;"> </span><span style="color: #008800;">'clientIP: '</span><span style="color: #000000;"> </span><span style="color: #666600;">+</span><span style="color: #000000;"> clientIP </span><span style="color: #666600;">+</span><span style="color: #000000;"> </span><span style="color: #008800;">'\n'</span><span style="color: #000000;"> </span><span style="color: #666600;">+</span><span style="color: #000000;"> </span><span style="color: #008800;">'body: '</span><span style="color: #000000;"> </span><span style="color: #666600;">+</span><span style="color: #000000;"> body </span><span style="color: #666600;">+</span><span style="color: #000000;"> </span><span style="color: #008800;">'\n'</span><span style="color: #666600;">)</span></code></li><li><code><span style="color: #000000;">        </span><span style="color: #880000;">// var respBody = new Buffer( )</span></code></li><li><code><span style="color: #000000;">        response</span><span style="color: #666600;">.</span><span style="color: #000000;">setStatusCode</span><span style="color: #666600;">(</span><span style="color: #006666;">200</span><span style="color: #666600;">)</span></code></li><li><code><span style="color: #000000;">        response</span><span style="color: #666600;">.</span><span style="color: #000000;">setHeader</span><span style="color: #666600;">(</span><span style="color: #008800;">'content-type'</span><span style="color: #666600;">,</span><span style="color: #000000;"> </span><span style="color: #008800;">'application/json'</span><span style="color: #666600;">)</span></code></li><li><br></li><li><code><span style="color: #000000;">        response</span><span style="color: #666600;">.</span><span style="color: #000000;">send</span><span style="color: #666600;">(</span><span style="color: #000000;">respBody</span><span style="color: #666600;">)</span></code></li><li><br></li><li><code><span style="color: #000000;">    </span><span style="color: #666600;">})</span></code></li><li><code><span style="color: #666600;">};</span></code></li></ol><h2 id="LT0Y4"><a class="lake-anchor" style="top: 11px;"><span class="lake-anchor-button lake-icon lake-icon-h2"></span></a>使用express实现</h2><p><br></p><p>具体细节，可以看这里，<a href="https://help.aliyun.com/document_detail/147099.html?spm=a2c4g.11186623.6.715.57c029e9Zhiypz" target="_blank" rel="noopener noreferrer">搭建基于 express 的 Serverless Web 应用</a></p><p>这里主要提的一点是在express中无法使用body-parse的中间件，所以解析body的代码得自己实现</p><p><br></p><p style="text-align: left;"><span data-card-type="inline" data-lake-card="image" contenteditable="false" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F101638%2F1579059013968-e816de9f-5182-441f-bce9-b5cea12db6b7.png%22%2C%22originWidth%22%3A793%2C%22originHeight%22%3A570%2C%22name%22%3A%22image.png%22%2C%22size%22%3A83814%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A226.33543%2C%22y%22%3A0%2C%22width%22%3A278.37607%2C%22height%22%3A15.694793%2C%22text%22%3A%22require(%40wedserverless%2Ffc-express)%22%7D%2C%7B%22x%22%3A109.86355%2C%22y%22%3A1.6520834%2C%22width%22%3A61.95312999999999%2C%22height%22%3A13.2166676%2C%22text%22%3A%22Server%22%7D%2C%7B%22x%22%3A47.084377%2C%22y%22%3A3.3041668%2C%22width%22%3A40.47604299999999%2C%22height%22%3A11.564584199999999%2C%22text%22%3A%22const%22%7D%2C%7B%22x%22%3A46.258335%2C%22y%22%3A23.129168%2C%22width%22%3A42.954165%2C%22height%22%3A11.564584000000004%2C%22text%22%3A%22const%22%7D%2C%7B%22x%22%3A115.645836%2C%22y%22%3A22.303125%2C%22width%22%3A216.422924%2C%22height%22%3A15.694792%2C%22text%22%3A%22expressrequireexpress)%3B%22%7D%2C%7B%22x%22%3A76.82188%2C%22y%22%3A42.95417%2C%22width%22%3A297.37502000000006%2C%22height%22%3A15.694790000000005%2C%22text%22%3A%22constquestionsrquirequestin%22%7D%2C%7B%22x%22%3A45.432293%2C%22y%22%3A43.78021%2C%22width%22%3A47.084377%2C%22height%22%3A13.21667%2C%22text%22%3A%22const%22%7D%2C%7B%22x%22%3A57.822918%2C%22y%22%3A63.605213%2C%22width%22%3A311.417712%2C%22height%22%3A16.520832000000006%2C%22text%22%3A%22constgetRawBodyrequire%5C%22'raw-body%22%7D%2C%7B%22x%22%3A47.91042%2C%22y%22%3A105.73334%2C%22width%22%3A207.33647000000002%2C%22height%22%3A14.04271%2C%22text%22%3A%22constqsrequire(qs%22%7D%2C%7B%22x%22%3A128.8625%2C%22y%22%3A124.7323%2C%22width%22%3A384.9354%2C%22height%22%3A17.346880000000013%2C%22text%22%3A%22ANSWERS%5B22%22%7D%2C%7B%22x%22%3A97.47292%2C%22y%22%3A147.86147%2C%22width%22%3A321.33021%2C%22height%22%3A14.868740000000003%2C%22text%22%3A%22nstparsePostBodyfunction(eg%2Cdone)%22%7D%2C%7B%22x%22%3A4.1302085%2C%22y%22%3A168.51251%2C%22width%22%3A18.1729165%2C%22height%22%3A13.216660000000019%2C%22text%22%3A%2210%22%7D%2C%7B%22x%22%3A61.95313%2C%22y%22%3A170.99063%2C%22width%22%3A94.99479000000001%2C%22height%22%3A12.390629999999987%2C%22text%22%3A%22vararr%22%7D%2C%7B%22x%22%3A4.1302085%2C%22y%22%3A189.16354%2C%22width%22%3A17.3468765%2C%22height%22%3A13.216679999999997%2C%22text%22%3A%2211%22%7D%2C%7B%22x%22%3A60.301044%2C%22y%22%3A189.9896%2C%22width%22%3A91.69062600000001%2C%22height%22%3A14.042699999999996%2C%22text%22%3A%22varchunks%3B%22%7D%2C%7B%22x%22%3A3.3041668%2C%22y%22%3A210.64064%2C%22width%22%3A18.9989582%2C%22height%22%3A13.216660000000019%2C%22text%22%3A%2212%22%7D%2C%7B%22x%22%3A66.083336%2C%22y%22%3A211.46667%2C%22width%22%3A162.730214%2C%22height%22%3A13.216679999999997%2C%22text%22%3A%22reg.on(data%2Cbuff%22%7D%2C%7B%22x%22%3A3.3041668%2C%22y%22%3A231.29167%2C%22width%22%3A18.9989582%2C%22height%22%3A13.216679999999997%2C%22text%22%3A%2213%22%7D%2C%7B%22x%22%3A91.69063%2C%22y%22%3A231.29167%2C%22width%22%3A129.68855%2C%22height%22%3A14.04271%2C%22text%22%3A%22arr.push(buff)%3B%22%7D%2C%7B%22x%22%3A60.301044%2C%22y%22%3A251.11668%2C%22width%22%3A27.259375999999996%2C%22height%22%3A16.520819999999986%2C%22text%22%3A%22H)%3B%22%7D%2C%7B%22x%22%3A4.1302085%2C%22y%22%3A252.76877%2C%22width%22%3A17.3468765%2C%22height%22%3A13.216669999999993%2C%22text%22%3A%2214%22%7D%2C%7B%22x%22%3A3.3041668%2C%22y%22%3A273.4198%2C%22width%22%3A18.172918199999998%2C%22height%22%3A13.216669999999965%2C%22text%22%3A%2215%22%7D%2C%7B%22x%22%3A65.25729%2C%22y%22%3A274.24585%2C%22width%22%3A159.42606%2C%22height%22%3A14.868749999999977%2C%22text%22%3A%22reg.on('end%5C%22%2C)%3E%22%7D%2C%7B%22x%22%3A89.2125%2C%22y%22%3A294.07086%2C%22width%22%3A232.94377999999998%2C%22height%22%3A15.69476000000003%2C%22text%22%3A%22chunks-Buffer.concat(arr)%3B%22%7D%2C%7B%22x%22%3A3.3041668%2C%22y%22%3A294.89688%2C%22width%22%3A18.172918199999998%2C%22height%22%3A12.390620000000013%2C%22text%22%3A%2216%22%7D%2C%7B%22x%22%3A3.3041668%2C%22y%22%3A315.54794%2C%22width%22%3A17.3468762%2C%22height%22%3A14.042700000000025%2C%22text%22%3A%2217%22%7D%2C%7B%22x%22%3A96.64688%2C%22y%22%3A314.7219%2C%22width%22%3A111.51562%2C%22height%22%3A15.694799999999987%2C%22text%22%3A%22done(chunks)%3B%22%7D%2C%7B%22x%22%3A3.3041668%2C%22y%22%3A336.19897%2C%22width%22%3A18.172918199999998%2C%22height%22%3A13.216680000000053%2C%22text%22%3A%2218%22%7D%2C%7B%22x%22%3A61.95313%2C%22y%22%3A336.19897%2C%22width%22%3A23.955209999999994%2C%22height%22%3A14.042700000000025%2C%22text%22%3A%22H)%3A%22%7D%2C%7B%22x%22%3A3.3041668%2C%22y%22%3A356.85%2C%22width%22%3A18.9989582%2C%22height%22%3A14.042729999999949%2C%22text%22%3A%2219%22%7D%2C%7B%22x%22%3A1.6520834%2C%22y%22%3A377.50107%2C%22width%22%3A20.651041600000003%2C%22height%22%3A14.042689999999993%2C%22text%22%3A%2220%22%7D%2C%7B%22x%22%3A2.478125%2C%22y%22%3A398.97815%2C%22width%22%3A19.825000000000003%2C%22height%22%3A13.216669999999965%2C%22text%22%3A%2221%22%7D%2C%7B%22x%22%3A48.73646%2C%22y%22%3A400.63022%2C%22width%22%3A181.72918%2C%22height%22%3A14.042719999999974%2C%22text%22%3A%22constapp-expressO%3B%22%7D%2C%7B%22x%22%3A2.478125%2C%22y%22%3A419.62918%2C%22width%22%3A19.825000000000003%2C%22height%22%3A15.694789999999955%2C%22text%22%3A%2222%22%7D%2C%7B%22x%22%3A1.6520834%2C%22y%22%3A440.28024%2C%22width%22%3A20.651041600000003%2C%22height%22%3A14.868760000000009%2C%22text%22%3A%2223%22%7D%2C%7B%22x%22%3A40.476044%2C%22y%22%3A441.10626%2C%22width%22%3A301.505216%2C%22height%22%3A15.694799999999987%2C%22text%22%3A%223app.get%2Fapi%2Fquestions(eg%2C)%22%7D%2C%7B%22x%22%3A2.478125%2C%22y%22%3A462.58334%2C%22width%22%3A18.99896%2C%22height%22%3A12.390629999999987%2C%22text%22%3A%2224%22%7D%2C%7B%22x%22%3A62.77917%2C%22y%22%3A464.23544%2C%22width%22%3A94.9948%2C%22height%22%3A13.216679999999997%2C%22text%22%3A%22res.send(%22%7D%2C%7B%22x%22%3A1.6520834%2C%22y%22%3A482.40836%2C%22width%22%3A20.651041600000003%2C%22height%22%3A14.042719999999974%2C%22text%22%3A%2225%22%7D%2C%7B%22x%22%3A80.126045%2C%22y%22%3A484.06042%2C%22width%22%3A128.862515%2C%22height%22%3A14.042730000000006%2C%22text%22%3A%22data%3Aquestions%22%7D%2C%7B%22x%22%3A3.3041668%2C%22y%22%3A503.0594%2C%22width%22%3A18.9989582%2C%22height%22%3A14.868760000000066%2C%22text%22%3A%2226%22%7D%2C%7B%22x%22%3A79.3%2C%22y%22%3A503.0594%2C%22width%22%3A79.3%2C%22height%22%3A14.868760000000066%2C%22text%22%3A%22code%3A200%22%7D%2C%7B%22x%22%3A2.478125%2C%22y%22%3A523.71045%2C%22width%22%3A19.825000000000003%2C%22height%22%3A15.694749999999999%2C%22text%22%3A%2227%22%7D%2C%7B%22x%22%3A1.6520834%2C%22y%22%3A545.1875%2C%22width%22%3A20.651041600000003%2C%22height%22%3A15.694799999999987%2C%22text%22%3A%2228%22%7D%5D%2C%22style%22%3A%22none%22%2C%22search%22%3A%22require(%40wedserverless%2Ffc-express)%20Server%20const%20const%20expressrequireexpress)%3B%20constquestionsrquirequestin%20const%20constgetRawBodyrequire%5C%22'raw-body%20constqsrequire(qs%20ANSWERS%5B22%20nstparsePostBodyfunction(eg%2Cdone)%2010%20vararr%2011%20varchunks%3B%2012%20reg.on(data%2Cbuff%2013%20arr.push(buff)%3B%20H)%3B%2014%2015%20reg.on('end%5C%22%2C)%3E%20chunks-Buffer.concat(arr)%3B%2016%2017%20done(chunks)%3B%2018%20H)%3A%2019%2020%2021%20constapp-expressO%3B%2022%2023%203app.get%2Fapi%2Fquestions(eg%2C)%2024%20res.send(%2025%20data%3Aquestions%2026%20code%3A200%2027%2028%22%2C%22width%22%3A793%2C%22height%22%3A570%7D"><span data-card-element="body"><span data-card-element="center"><span class="lake-image">
    <span class="lake-image-content lake-image-content-isvalid">
      <span data-role="detail" class="lake-image-detail">
        <span class="lake-image-meta" style="">
          <span class="lake-image-warning" style="display: none;">
            <i class="anticon anticon-exclamation-circle">
              <svg viewBox="64 64 896 896" class="" data-icon="exclamation-circle" width="1em" height="1em" fill="currentColor" aria-hidden="true">
                <path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"></path><path d="M464 688a48 48 0 1 0 96 0 48 48 0 1 0-96 0zM488 576h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"></path>
              </svg>
            </i>
          </span>
          <img data-role="image" src="https://cdn.nlark.com/yuque/0/2020/png/101638/1579059013968-e816de9f-5182-441f-bce9-b5cea12db6b7.png?x-oss-process=image/resize,w_746" data-raw-src="https://cdn.nlark.com/yuque/0/2020/png/101638/1579059013968-e816de9f-5182-441f-bce9-b5cea12db6b7.png" class="image lake-drag-image" alt="image.png" title="image.png" style="border: none; box-shadow: none; visibility: visible; width: 479px; height: 344px;">
          
  
  
          <span data-role="maximize" class="lake-image-editor-maximize" style="display: none;"><span class="lake-icon lake-icon-full-screen"></span></span>
          <div class="lake-image-mask"><p class="lake-image-mask-point" style="font-size: 14.764584587641867px;left: 212.92084587641867px;top: 0px;">require(@wedserverless/fc-express)</p><p class="lake-image-mask-point" style="font-size: 12.433334211349306px;left: 103.35209117276166px;top: 1.5541667293820933px;">Server</p><p class="lake-image-mask-point" style="font-size: 10.879167481967212px;left: 44.2937518814628px;top: 3.1083334587641867px;">const</p><p class="lake-image-mask-point" style="font-size: 10.879167293820936px;left: 43.516668234552334px;top: 21.758334587641865px;">const</p><p class="lake-image-mask-point" style="font-size: 14.764583646910467px;left: 108.79166917528373px;top: 20.981250000000003px;">expressrequireexpress);</p><p class="lake-image-mask-point" style="font-size: 14.764581765447671px;left: 72.268754703657px;top: 40.40833646910466px;">constquestionsrquirequestin</p><p class="lake-image-mask-point" style="font-size: 12.433336469104667px;left: 42.739584587641865px;top: 41.18541823455233px;">const</p><p class="lake-image-mask-point" style="font-size: 15.541665412358139px;left: 54.395834587641865px;top: 59.83542105674653px;">constgetRawBodyrequire"'raw-body</p><p class="lake-image-mask-point" style="font-size: 13.210418234552332px;left: 45.07083646910467px;top: 99.46667293820933px;">constqsrequire(qs</p><p class="lake-image-mask-point" style="font-size: 16.31875470365701px;left: 121.22500000000001px;top: 117.33959117276166px;">ANSWERS[22</p><p class="lake-image-mask-point" style="font-size: 13.987490592686004px;left: 91.69583646910466px;top: 139.09792764186633px;">nstparsePostBodyfunction(eg,done)</p><p class="lake-image-mask-point" style="font-size: 12.433327061790687px;left: 3.8854168234552335px;top: 158.525009407314px;">10</p><p class="lake-image-mask-point" style="font-size: 11.656254703656987px;left: 58.281254703657px;top: 160.85625470365702px;">vararr</p><p class="lake-image-mask-point" style="font-size: 12.43334587641866px;left: 3.8854168234552335px;top: 177.95208176544767px;">11</p><p class="lake-image-mask-point" style="font-size: 13.210408827238332px;left: 56.727085528373266px;top: 178.72918234552333px;">varchunks;</p><p class="lake-image-mask-point" style="font-size: 12.433327061790687px;left: 3.1083334587641867px;top: 198.156264110971px;">12</p><p class="lake-image-mask-point" style="font-size: 12.43334587641866px;left: 62.16666917528374px;top: 198.93333646910466px;">reg.on(data,buff</p><p class="lake-image-mask-point" style="font-size: 12.43334587641866px;left: 3.1083334587641867px;top: 217.58333646910467px;">13</p><p class="lake-image-mask-point" style="font-size: 13.210418234552332px;left: 86.25625470365699px;top: 217.58333646910467px;">arr.push(buff);</p><p class="lake-image-mask-point" style="font-size: 15.541654123581324px;left: 56.727085528373266px;top: 236.23334587641867px;">H);</p><p class="lake-image-mask-point" style="font-size: 12.43333646910466px;left: 3.8854168234552335px;top: 237.787518814628px;">14</p><p class="lake-image-mask-point" style="font-size: 12.433336469104633px;left: 3.1083334587641867px;top: 257.2145911727617px;">15</p><p class="lake-image-mask-point" style="font-size: 13.98749999999998px;left: 61.389581765447666px;top: 257.9916823455234px;">reg.on('end",)&gt;</p><p class="lake-image-mask-point" style="font-size: 14.764553543505704px;left: 83.92500000000001px;top: 276.6416917528373px;">chunks-Buffer.concat(arr);</p><p class="lake-image-mask-point" style="font-size: 11.656245296343013px;left: 3.1083334587641867px;top: 277.418754703657px;">16</p><p class="lake-image-mask-point" style="font-size: 13.210408827238359px;left: 3.1083334587641867px;top: 296.84585528373265px;">17</p><p class="lake-image-mask-point" style="font-size: 14.764591172761651px;left: 90.918754703657px;top: 296.068773518285px;">done(chunks);</p><p class="lake-image-mask-point" style="font-size: 12.433345876418713px;left: 3.1083334587641867px;top: 316.2729276418663px;">18</p><p class="lake-image-mask-point" style="font-size: 13.210408827238359px;left: 58.281254703657px;top: 316.2729276418663px;">H):</p><p class="lake-image-mask-point" style="font-size: 13.21043704918028px;left: 3.1083334587641867px;top: 335.70000000000005px;">19</p><p class="lake-image-mask-point" style="font-size: 13.21039941992433px;left: 1.5541667293820933px;top: 355.1271099873897px;">20</p><p class="lake-image-mask-point" style="font-size: 12.433336469104633px;left: 2.33125px;top: 375.331273518285px;">21</p><p class="lake-image-mask-point" style="font-size: 13.210427641866307px;left: 45.84791823455233px;top: 376.88542764186633px;">constapp-expressO;</p><p class="lake-image-mask-point" style="font-size: 14.764581765447625px;left: 2.33125px;top: 394.7583458764187px;">22</p><p class="lake-image-mask-point" style="font-size: 13.987509407314006px;left: 1.5541667293820933px;top: 414.18544645649433px;">23</p><p class="lake-image-mask-point" style="font-size: 14.764591172761651px;left: 38.07708552837327px;top: 414.96250940731403px;">3app.get/api/questions(eg,)</p><p class="lake-image-mask-point" style="font-size: 11.656254703656987px;left: 2.33125px;top: 435.16667293820933px;">24</p><p class="lake-image-mask-point" style="font-size: 12.43334587641866px;left: 59.05833646910467px;top: 436.72085528373265px;">res.send(</p><p class="lake-image-mask-point" style="font-size: 13.210427641866307px;left: 1.5541667293820933px;top: 453.81669175283736px;">25</p><p class="lake-image-mask-point" style="font-size: 13.210437049180333px;left: 75.37708646910467px;top: 455.3708364691047px;">data:questions</p><p class="lake-image-mask-point" style="font-size: 13.98750940731406px;left: 3.1083334587641867px;top: 473.24377351828497px;">26</p><p class="lake-image-mask-point" style="font-size: 13.98750940731406px;left: 74.6px;top: 473.24377351828497px;">code:200</p><p class="lake-image-mask-point" style="font-size: 14.764544136191676px;left: 2.33125px;top: 492.6708646910467px;">27</p><p class="lake-image-mask-point" style="font-size: 14.764591172761651px;left: 1.5541667293820933px;top: 512.875px;">28</p></div>
        </span>
      </span>
    </span>
  </span></span></span></span><span style="color: #D4D4D4;">          </span><span><br></span></p><p><span data-card-type="inline" data-lake-card="image" contenteditable="false" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F101638%2F1579059034415-48f84650-adf0-4ef3-bea9-acdb8c4eee79.png%22%2C%22originWidth%22%3A840%2C%22originHeight%22%3A912%2C%22name%22%3A%22image.png%22%2C%22size%22%3A123006%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A5.7%2C%22y%22%3A0%2C%22width%22%3A33.249997%2C%22height%22%3A15.2%2C%22text%22%3A%2230%22%7D%2C%7B%22x%22%3A59.85%2C%22y%22%3A0%2C%22width%22%3A272.65%2C%22height%22%3A15.2%2C%22text%22%3A%22app.post%2Fapi%2Fscores(eq%2Cre)%22%7D%2C%7B%22x%22%3A6.6499996%2C%22y%22%3A19%2C%22width%22%3A19.000000399999998%2C%22height%22%3A19.000000399999998%2C%22text%22%3A%221%E7%8A%AF3%22%7D%2C%7B%22x%22%3A66.5%2C%22y%22%3A21.849998%2C%22width%22%3A47.49999%2C%22height%22%3A14.250002000000002%2C%22text%22%3A%22tryt%22%7D%2C%7B%22x%22%3A86.45%2C%22y%22%3A40.85%2C%22width%22%3A230.85000000000002%2C%22height%22%3A15.199999999999996%2C%22text%22%3A%22parsePostBody(reg%2C(chunks)%3E%22%7D%2C%7B%22x%22%3A5.7%2C%22y%22%3A58.899998%2C%22width%22%3A20.899998%2C%22height%22%3A20.899998%2C%22text%22%3A%22%E5%93%81%E8%A5%BF%E8%A5%BF%E4%B8%9C%E5%B8%82%E8%B4%B8%E8%B4%B8%22%7D%2C%7B%22x%22%3A102.6%2C%22y%22%3A61.749996%2C%22width%22%3A91.19999000000001%2C%22height%22%3A16.149998000000004%2C%22text%22%3A%22if(chunks)%22%7D%2C%7B%22x%22%3A127.299995%2C%22y%22%3A81.7%2C%22width%22%3A408.500005%2C%22height%22%3A18.049999999999997%2C%22text%22%3A%22varbody-qs.parse(chunks.tostring%E5%80%9F%E5%8A%A9qs%E8%A7%A3%E6%9E%90%22%7D%2C%7B%22x%22%3A119.7%2C%22y%22%3A104.5%2C%22width%22%3A171.95%2C%22height%22%3A14.249989999999997%2C%22text%22%3A%22if(Abody.answers)%22%7D%2C%7B%22x%22%3A133%2C%22y%22%3A126.35%2C%22width%22%3A94.04999000000001%2C%22height%22%3A12.349999999999994%2C%22text%22%3A%22res.send%22%7D%2C%7B%22x%22%3A147.25%2C%22y%22%3A145.34999%2C%22width%22%3A137.75%2C%22height%22%3A16.15001000000001%2C%22text%22%3A%22msg%3A%E8%AF%B7%E8%BE%93%E5%85%A5%E7%AD%94%E6%A1%88%22%7D%2C%7B%22x%22%3A150.09999%2C%22y%22%3A168.15%2C%22width%22%3A80.75%2C%22height%22%3A12.349999999999994%2C%22text%22%3A%22code%3A400%22%7D%2C%7B%22x%22%3A135.84999%2C%22y%22%3A188.09999%2C%22width%22%3A17.100009999999997%2C%22height%22%3A15.200000000000017%2C%22text%22%3A%22)%22%7D%2C%7B%22x%22%3A131.09999%2C%22y%22%3A209.95%2C%22width%22%3A49.40001000000001%2C%22height%22%3A13.299980000000005%2C%22text%22%3A%22else%22%7D%2C%7B%22x%22%3A136.79999%2C%22y%22%3A229.9%2C%22width%22%3A327.75001%2C%22height%22%3A15.199989999999985%2C%22text%22%3A%22constanswersjson.parse(body.answers)%22%7D%2C%7B%22x%22%3A7.6%2C%22y%22%3A247.95%2C%22width%22%3A18.049999999999997%2C%22height%22%3A18.049999999999997%2C%22text%22%3A%22%E5%A5%BD%E6%97%B6%E7%BE%8E%E6%89%8B%E5%AF%BC%E5%AF%BC%E5%8A%A8%E5%AF%BC%E6%AF%8D%E6%98%93%E9%A5%AD%E8%B4%B8%22%7D%2C%7B%22x%22%3A737.19995%2C%22y%22%3A249.84999%2C%22width%22%3A45.60005000000001%2C%22height%22%3A16.15001000000001%2C%22text%22%3A%22item)%22%7D%2C%7B%22x%22%3A579.5%2C%22y%22%3A250.79999%2C%22width%22%3A119.69994999999994%2C%22height%22%3A16.149989999999974%2C%22text%22%3A%22ANSWERS%5Bindex%5D%22%7D%2C%7B%22x%22%3A144.4%2C%22y%22%3A251.74998%2C%22width%22%3A390.45000000000005%2C%22height%22%3A14.250020000000006%2C%22text%22%3A%22constrightAnswersanswers.filter(iemide)%22%7D%2C%7B%22x%22%3A136.79999%2C%22y%22%3A273.59998%2C%22width%22%3A85.5%2C%22height%22%3A12.349999999999966%2C%22text%22%3A%22res%2Csend%22%7D%2C%7B%22x%22%3A149.15%2C%22y%22%3A293.55%2C%22width%22%3A245.1%2C%22height%22%3A15.199999999999989%2C%22text%22%3A%22data%3ArightAnswers.length*5%22%7D%2C%7B%22x%22%3A151.04999%2C%22y%22%3A315.4%2C%22width%22%3A65.54999999999998%2C%22height%22%3A12.350000000000023%2C%22text%22%3A%22code%3A200%22%7D%2C%7B%22x%22%3A133%2C%22y%22%3A334.4%2C%22width%22%3A26.59998999999999%2C%22height%22%3A17.100000000000023%2C%22text%22%3A%22H%3A%22%7D%2C%7B%22x%22%3A106.399994%2C%22y%22%3A377.15%2C%22width%22%3A54.149996%2C%22height%22%3A15.19998000000004%2C%22text%22%3A%22else%22%7D%2C%7B%22x%22%3A118.74999%2C%22y%22%3A399%2C%22width%22%3A95.95000999999999%2C%22height%22%3A14.25%2C%22text%22%3A%22res.send(%22%7D%2C%7B%22x%22%3A127.299995%2C%22y%22%3A418.94998%2C%22width%22%3A152.950005%2C%22height%22%3A16.150000000000034%2C%22text%22%3A%22data%3A%5C%22%E8%AF%B7%E8%BE%93%E5%85%A5%E7%AD%94%E6%A1%88%2C%22%7D%2C%7B%22x%22%3A130.15%2C%22y%22%3A439.84998%2C%22width%22%3A87.39999%2C%22height%22%3A14.25%2C%22text%22%3A%22code%3A400%22%7D%2C%7B%22x%22%3A116.85%2C%22y%22%3A461.69998%2C%22width%22%3A22.80000000000001%2C%22height%22%3A13.299990000000037%2C%22text%22%3A%22%E4%B8%BA)%22%7D%2C%7B%22x%22%3A6.6499996%2C%22y%22%3A477.84998%2C%22width%22%3A18.049999399999997%2C%22height%22%3A18.049999399999997%2C%22text%22%3A%22%E8%BF%AA%E5%88%975%E6%AC%BE%22%7D%2C%7B%22x%22%3A82.649994%2C%22y%22%3A501.59998%2C%22width%22%3A24.700005999999988%2C%22height%22%3A17.099969999999928%2C%22text%22%3A%22%E5%88%97)%3B%22%7D%2C%7B%22x%22%3A75.049995%2C%22y%22%3A524.39996%2C%22width%22%3A87.400005%2C%22height%22%3A15.200040000000058%2C%22text%22%3A%22catch(e)f%22%7D%2C%7B%22x%22%3A85.5%2C%22y%22%3A545.3%2C%22width%22%3A82.65%2C%22height%22%3A15.200000000000045%2C%22text%22%3A%22res.send(%22%7D%2C%7B%22x%22%3A98.799995%2C%22y%22%3A566.19995%2C%22width%22%3A61.74999500000001%2C%22height%22%3A13.300050000000056%2C%22text%22%3A%22data%3Ae%22%7D%2C%7B%22x%22%3A99.75%2C%22y%22%3A587.1%2C%22width%22%3A76%2C%22height%22%3A14.25%2C%22text%22%3A%22code%3A400%22%7D%2C%7B%22x%22%3A5.7%2C%22y%22%3A608.94995%2C%22width%22%3A20.899998%2C%22height%22%3A20.899998%2C%22text%22%3A%22%E5%96%9D%E8%90%8C%E6%80%BB%E5%93%81%E6%B2%B9%E8%B6%85%E6%80%A1%E5%8F%B0%E7%AA%97%22%7D%2C%7B%22x%22%3A82.649994%2C%22y%22%3A608.94995%2C%22width%22%3A24.700005999999988%2C%22height%22%3A14.25%2C%22text%22%3A%22%E4%B8%BA)%3B%22%7D%2C%7B%22x%22%3A49.399998%2C%22y%22%3A648.85%2C%22width%22%3A23.74999600000001%2C%22height%22%3A17.09994999999992%2C%22text%22%3A%22H)%3B%22%7D%2C%7B%22x%22%3A8.549999%2C%22y%22%3A753.35%2C%22width%22%3A17.100001%2C%22height%22%3A17.100001%2C%22text%22%3A%228%E5%A6%87%22%7D%2C%7B%22x%22%3A50.35%2C%22y%22%3A755.25%2C%22width%22%3A261.24998%2C%22height%22%3A15.199949999999944%2C%22text%22%3A%22constservernewServer(app)%3B%22%7D%2C%7B%22x%22%3A8.549999%2C%22y%22%3A793.25%2C%22width%22%3A16.15%2C%22height%22%3A16.15%2C%22text%22%3A%2268%22%7D%2C%7B%22x%22%3A54.149998%2C%22y%22%3A796.1%2C%22width%22%3A182.399992%2C%22height%22%3A16.149999999999977%2C%22text%22%3A%22%2F%2Fhttptriggerentry%22%7D%2C%7B%22x%22%3A9.5%2C%22y%22%3A812.25%2C%22width%22%3A16.15%2C%22height%22%3A16.15%2C%22text%22%3A%2269%22%7D%2C%7B%22x%22%3A47.5%2C%22y%22%3A817.94995%2C%22width%22%3A294.5%2C%22height%22%3A16.15005000000008%2C%22text%22%3A%229module.exports.handler-aync(eg%2C%22%7D%2C%7B%22x%22%3A315.4%2C%22y%22%3A818.89996%2C%22width%22%3A155.79998%2C%22height%22%3A15.200040000000058%2C%22text%22%3A%22(reg%2Cres%2Ccontext)%22%7D%2C%7B%22x%22%3A7.6%2C%22y%22%3A836%2C%22width%22%3A17.099998999999997%2C%22height%22%3A17.099998999999997%2C%22text%22%3A%2270%22%7D%2C%7B%22x%22%3A63.649998%2C%22y%22%3A839.8%2C%22width%22%3A285.94998200000003%2C%22height%22%3A15.199940000000083%2C%22text%22%3A%22reg.bodyawaitgeawody%22%7D%2C%7B%22x%22%3A6.6499996%2C%22y%22%3A859.74994%2C%22width%22%3A18.049999399999997%2C%22height%22%3A15.200009999999907%2C%22text%22%3A%2271%22%7D%2C%7B%22x%22%3A56.999996%2C%22y%22%3A860.69995%2C%22width%22%3A307.800004%2C%22height%22%3A15.20001000000002%2C%22text%22%3A%22server.httpProxyreg%2Creconex)%22%7D%2C%7B%22x%22%3A7.6%2C%22y%22%3A876.85%2C%22width%22%3A17.099998999999997%2C%22height%22%3A17.099998999999997%2C%22text%22%3A%2272%22%7D%5D%2C%22style%22%3A%22none%22%2C%22search%22%3A%2230%20app.post%2Fapi%2Fscores(eq%2Cre)%201%E7%8A%AF3%20tryt%20parsePostBody(reg%2C(chunks)%3E%20%E5%93%81%E8%A5%BF%E8%A5%BF%E4%B8%9C%E5%B8%82%E8%B4%B8%E8%B4%B8%20if(chunks)%20varbody-qs.parse(chunks.tostring%E5%80%9F%E5%8A%A9qs%E8%A7%A3%E6%9E%90%20if(Abody.answers)%20res.send%20msg%3A%E8%AF%B7%E8%BE%93%E5%85%A5%E7%AD%94%E6%A1%88%20code%3A400%20)%20else%20constanswersjson.parse(body.answers)%20%E5%A5%BD%E6%97%B6%E7%BE%8E%E6%89%8B%E5%AF%BC%E5%AF%BC%E5%8A%A8%E5%AF%BC%E6%AF%8D%E6%98%93%E9%A5%AD%E8%B4%B8%20item)%20ANSWERS%5Bindex%5D%20constrightAnswersanswers.filter(iemide)%20res%2Csend%20data%3ArightAnswers.length*5%20code%3A200%20H%3A%20else%20res.send(%20data%3A%5C%22%E8%AF%B7%E8%BE%93%E5%85%A5%E7%AD%94%E6%A1%88%2C%20code%3A400%20%E4%B8%BA)%20%E8%BF%AA%E5%88%975%E6%AC%BE%20%E5%88%97)%3B%20catch(e)f%20res.send(%20data%3Ae%20code%3A400%20%E5%96%9D%E8%90%8C%E6%80%BB%E5%93%81%E6%B2%B9%E8%B6%85%E6%80%A1%E5%8F%B0%E7%AA%97%20%E4%B8%BA)%3B%20H)%3B%208%E5%A6%87%20constservernewServer(app)%3B%2068%20%2F%2Fhttptriggerentry%2069%209module.exports.handler-aync(eg%2C%20(reg%2Cres%2Ccontext)%2070%20reg.bodyawaitgeawody%2071%20server.httpProxyreg%2Creconex)%2072%22%2C%22width%22%3A840%2C%22height%22%3A912%7D"><span data-card-element="body"><span data-card-element="center"><span class="lake-image">
    <span class="lake-image-content lake-image-content-isvalid">
      <span data-role="detail" class="lake-image-detail">
        <span class="lake-image-meta" style="">
          <span class="lake-image-warning" style="display: none;">
            <i class="anticon anticon-exclamation-circle">
              <svg viewBox="64 64 896 896" class="" data-icon="exclamation-circle" width="1em" height="1em" fill="currentColor" aria-hidden="true">
                <path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"></path><path d="M464 688a48 48 0 1 0 96 0 48 48 0 1 0-96 0zM488 576h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"></path>
              </svg>
            </i>
          </span>
          <img data-role="image" src="https://cdn.nlark.com/yuque/0/2020/png/101638/1579059034415-48f84650-adf0-4ef3-bea9-acdb8c4eee79.png?x-oss-process=image/resize,w_746" data-raw-src="https://cdn.nlark.com/yuque/0/2020/png/101638/1579059034415-48f84650-adf0-4ef3-bea9-acdb8c4eee79.png" class="image lake-drag-image" alt="image.png" title="image.png" style="border: none; box-shadow: none; visibility: visible; width: 479px; height: 520px;">
          
  
  
          <span data-role="maximize" class="lake-image-editor-maximize" style="display: none;"><span class="lake-icon lake-icon-full-screen"></span></span>
          <div class="lake-image-mask"><p class="lake-image-mask-point" style="font-size: 13.499047619047618px;left: 5.062142857142857px;top: 0px;">30</p><p class="lake-image-mask-point" style="font-size: 13.499047619047618px;left: 53.152499999999996px;top: 0px;">app.post/api/scores(eq,re)</p><p class="lake-image-mask-point" style="font-size: 16.873809879047617px;left: 5.905832978095238px;top: 16.873809523809523px;">1犯3</p><p class="lake-image-mask-point" style="font-size: 12.65535891904762px;left: 59.05833333333333px;top: 19.404879176190473px;">tryt</p><p class="lake-image-mask-point" style="font-size: 13.499047619047614px;left: 76.77583333333334px;top: 36.27869047619048px;">parsePostBody(reg,(chunks)&gt;</p><p class="lake-image-mask-point" style="font-size: 18.5611887px;left: 5.062142857142857px;top: 52.30880774761904px;">品西西东市贸贸</p><p class="lake-image-mask-point" style="font-size: 14.34273631904762px;left: 91.11857142857141px;top: 54.8398774px;">if(chunks)</p><p class="lake-image-mask-point" style="font-size: 16.030119047619046px;left: 113.05451936904761px;top: 72.55738095238095px;">varbody-qs.parse(chunks.tostring借助qs解析</p><p class="lake-image-mask-point" style="font-size: 12.65534826190476px;left: 106.30499999999999px;top: 92.80595238095238px;">if(Abody.answers)</p><p class="lake-image-mask-point" style="font-size: 10.967976190476184px;left: 118.11666666666666px;top: 112.21083333333333px;">res.send</p><p class="lake-image-mask-point" style="font-size: 14.342746976190483px;left: 130.7720238095238px;top: 129.08463397619047px;">msg:请输入答案</p><p class="lake-image-mask-point" style="font-size: 10.967976190476184px;left: 133.30308635714283px;top: 149.3332142857143px;">code:400</p><p class="lake-image-mask-point" style="font-size: 13.499047619047634px;left: 120.6477292142857px;top: 167.05070540476189px;">)</p><p class="lake-image-mask-point" style="font-size: 11.811648904761908px;left: 116.42927683333332px;top: 186.4555952380952px;">else</p><p class="lake-image-mask-point" style="font-size: 13.499038738095225px;left: 121.49141969047619px;top: 204.17309523809524px;">constanswersjson.parse(body.answers)</p><p class="lake-image-mask-point" style="font-size: 16.030119047619046px;left: 6.749523809523809px;top: 220.20321428571427px;">好时美手导导动导母易饭贸</p><p class="lake-image-mask-point" style="font-size: 14.342746976190483px;left: 654.7037651190475px;top: 221.89058635714284px;">item)</p><p class="lake-image-mask-point" style="font-size: 14.34272921428569px;left: 514.6511904761904px;top: 222.73427683333333px;">ANSWERS[index]</p><p class="lake-image-mask-point" style="font-size: 12.65537490476191px;left: 128.2409523809524px;top: 223.5779584285714px;">constrightAnswersanswers.filter(iemide)</p><p class="lake-image-mask-point" style="font-size: 10.96797619047616px;left: 121.49141969047619px;top: 242.98283938095238px;">res,send</p><p class="lake-image-mask-point" style="font-size: 13.499047619047609px;left: 132.45940476190475px;top: 260.7003571428571px;">data:rightAnswers.length*5</p><p class="lake-image-mask-point" style="font-size: 10.967976190476211px;left: 134.14677683333332px;top: 280.10523809523806px;">code:200</p><p class="lake-image-mask-point" style="font-size: 15.186428571428591px;left: 118.11666666666666px;top: 296.9790476190476px;">H:</p><p class="lake-image-mask-point" style="font-size: 13.499029857142892px;left: 94.4933280047619px;top: 334.945119047619px;">else</p><p class="lake-image-mask-point" style="font-size: 12.655357142857142px;left: 105.46130064285714px;top: 354.34999999999997px;">res.send(</p><p class="lake-image-mask-point" style="font-size: 14.342738095238126px;left: 113.05451936904761px;top: 372.0674822380952px;">data:"请输入答案,</p><p class="lake-image-mask-point" style="font-size: 12.655357142857142px;left: 115.58559523809524px;top: 390.6286727142857px;">code:400</p><p class="lake-image-mask-point" style="font-size: 11.811657785714317px;left: 103.77392857142856px;top: 410.03355366666665px;">为)</p><p class="lake-image-mask-point" style="font-size: 16.030118514761902px;left: 5.905832978095238px;top: 424.3762917619048px;">迪列5款</p><p class="lake-image-mask-point" style="font-size: 15.186401928571364px;left: 73.40106610000001px;top: 445.46855366666665px;">列);</p><p class="lake-image-mask-point" style="font-size: 13.499083142857193px;left: 66.65154317857142px;top: 465.7171073333333px;">catch(e)f</p><p class="lake-image-mask-point" style="font-size: 13.499047619047658px;left: 75.93214285714285px;top: 484.27833333333325px;">res.send(</p><p class="lake-image-mask-point" style="font-size: 11.81171107142862px;left: 87.74380508333333px;top: 502.83947940476185px;">data:e</p><p class="lake-image-mask-point" style="font-size: 12.655357142857142px;left: 88.58749999999999px;top: 521.4007142857142px;">code:400</p><p class="lake-image-mask-point" style="font-size: 18.5611887px;left: 5.062142857142857px;top: 540.8055508333332px;">喝萌总品油超怡台窗</p><p class="lake-image-mask-point" style="font-size: 12.655357142857142px;left: 73.40106610000001px;top: 540.8055508333332px;">为);</p><p class="lake-image-mask-point" style="font-size: 15.186384166666596px;left: 43.87190298571428px;top: 576.2405952380952px;">H);</p><p class="lake-image-mask-point" style="font-size: 15.186429459523808px;left: 7.593213397619047px;top: 669.0465476190476px;">8妇</p><p class="lake-image-mask-point" style="font-size: 13.499003214285665px;left: 44.71559523809524px;top: 670.7339285714286px;">constservernewServer(app);</p><p class="lake-image-mask-point" style="font-size: 14.342738095238094px;left: 7.593213397619047px;top: 704.4815476190475px;">68</p><p class="lake-image-mask-point" style="font-size: 14.342738095238074px;left: 48.090355366666664px;top: 707.0126190476191px;">//httptriggerentry</p><p class="lake-image-mask-point" style="font-size: 14.342738095238094px;left: 8.436904761904762px;top: 721.3553571428571px;">69</p><p class="lake-image-mask-point" style="font-size: 14.34278250000007px;left: 42.18452380952381px;top: 726.417455595238px;">9module.exports.handler-aync(eg,</p><p class="lake-image-mask-point" style="font-size: 13.499083142857193px;left: 280.10523809523806px;top: 727.2611549523809px;">(reg,res,context)</p><p class="lake-image-mask-point" style="font-size: 15.18642768333333px;left: 6.749523809523809px;top: 742.447619047619px;">70</p><p class="lake-image-mask-point" style="font-size: 13.498994333333407px;left: 56.52726012857142px;top: 745.8223809523809px;">reg.bodyawaitgeawody</p><p class="lake-image-mask-point" style="font-size: 13.499056499999917px;left: 5.905832978095238px;top: 763.5398276666666px;">71</p><p class="lake-image-mask-point" style="font-size: 13.499056500000018px;left: 50.62142501904762px;top: 764.3835270238094px;">server.httpProxyreg,reconex)</p><p class="lake-image-mask-point" style="font-size: 15.18642768333333px;left: 6.749523809523809px;top: 778.7263095238095px;">72</p></div>
        </span>
      </span>
    </span>
  </span></span></span></span></p><h1 id="a28DD"><a class="lake-anchor" style="top: 13px;"><span class="lake-anchor-button lake-icon lake-icon-h1"></span></a><br></h1><h2 id="vuHz3"><a class="lake-anchor" style="top: 11px;"><span class="lake-anchor-button lake-icon lake-icon-h2"></span></a>配置访问域名</h2><p style="text-indent: 2em;">实现http触发器之后，可以直接使用阿里云提供的域名访问，也可以自己配置域名。</p><h3 id="h3-u4F7Fu7528u6D41u7A0B"><a class="lake-anchor" style="top: 9px;"><span class="lake-anchor-button lake-icon lake-icon-h3"></span></a>使用流程</h3><ul><li>使用 HTTP 触发器搭建 Web Server ;</li></ul><ul data-lake-indent="1"><li>搭建过程请参考 <a href="https://help.aliyun.com/document_detail/74768.html" target="_blank" rel="noopener noreferrer">HTTP 触发器示例</a>。</li></ul><ul><li>绑定自定义域名</li></ul><ul data-lake-indent="1"><li>步骤一： 域名需要在阿里云备案或接入阿里云备案（海外集群不需要备案）；</li></ul><ul data-lake-indent="2"><li>备案请参考文章 <a href="https://help.aliyun.com/document_detail/61819.html" target="_blank" rel="noopener noreferrer">阿里云备案</a> 。</li></ul><ul data-lake-indent="1"><li>步骤二：域名需要解析到您的<a href="https://help.aliyun.com/document_detail/52984.html" target="_blank" rel="noopener noreferrer">endpoint</a>上，即需要设置域名的 CNAME 到您对应区域的 endpoint，先设置 CNAME 再到函数计算进行绑定；</li></ul><ul data-lake-indent="2"><li>域名解析请参考文章 <a href="https://help.aliyun.com/document_detail/29716.html" target="_blank" rel="noopener noreferrer">设置域名解析</a>；</li><li>例如：您的域名为 <code>app.com</code>，您的 accountID 为 12345，区域为上海，需要设置 <code>app.com</code> 的 CNAME 为 <code>12345.cn-shanghai.fc.aliyuncs.com</code>。</li></ul><ul data-lake-indent="1"><li>步骤三：在函数计算绑定自定义域名，并设置不同的路径到不同函数。</li></ul><ul data-lake-indent="2"><li><strong>同一域名绑定的函数必须在同一区域，可以属于不同服务</strong>；</li><li>例如，您可以设置路径 <code>“/a”</code> 的请求到 <code>service1</code> 的 <code>function1</code> 执行，设置路径 <code>“/b”</code> 的请求到 <code>service2</code> 的 <code>function2</code> 执行；</li><li>只有设置了 <a href="https://help.aliyun.com/document_detail/71229.html" target="_blank" rel="noopener noreferrer">HTTP 触发器</a> 的函数才可以通过自定义域名的请求触发执行。</li></ul><ul><li>设置路由规则</li></ul><p style="text-indent: 2em;"><span data-card-type="inline" data-lake-card="image" contenteditable="false" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F101638%2F1579059940539-0fe53ce7-ec7e-45e0-b8b0-270955feeed1.png%22%2C%22originWidth%22%3A799%2C%22originHeight%22%3A381%2C%22name%22%3A%22image.png%22%2C%22size%22%3A31747%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A208.07292%2C%22y%22%3A7.4906254%2C%22width%22%3A132.33438%2C%22height%22%3A14.1489586%2C%22text%22%3A%22%E6%98%BE%E7%A4%BAPEM%E7%BC%96%E7%A0%81%E5%8F%82%E8%80%83%E6%A0%B7%E4%BE%8B%22%7D%2C%7B%22x%22%3A114.856255%2C%22y%22%3A54.09896%2C%22width%22%3A50.76979499999999%2C%22height%22%3A13.316669999999995%2C%22text%22%3A%22%E8%B7%AF%E7%94%B1%E8%AE%BE%E7%BD%AE%22%7D%2C%7B%22x%22%3A114.856255%2C%22y%22%3A101.53959%2C%22width%22%3A25.801044999999988%2C%22height%22%3A13.316665%2C%22text%22%3A%22%E8%B7%AF%E5%BE%84%22%7D%2C%7B%22x%22%3A265.50104%2C%22y%22%3A102.37188%2C%22width%22%3A49.10522000000003%2C%22height%22%3A13.316665%2C%22text%22%3A%22%E6%9C%8D%E5%8A%A1%E5%90%8D%E7%A7%B0%22%7D%2C%7B%22x%22%3A421.9719%2C%22y%22%3A102.37188%2C%22width%22%3A49.10519999999997%2C%22height%22%3A14.148955999999998%2C%22text%22%3A%22%E5%87%BD%E6%95%B0%E5%90%8D%E7%A7%B0%22%7D%2C%7B%22x%22%3A576.77814%2C%22y%22%3A102.37188%2C%22width%22%3A53.26666%2C%22height%22%3A13.316665%2C%22text%22%3A%22%E7%89%88%E6%9C%AC%2F%E5%88%AB%E5%90%8D%22%7D%2C%7B%22x%22%3A594.2563%2C%22y%22%3A149.8125%2C%22width%22%3A45.775999999999954%2C%22height%22%3A13.316669999999988%2C%22text%22%3A%22LATEST%22%7D%2C%7B%22x%22%3A130.6698%2C%22y%22%3A151.47708%2C%22width%22%3A84.06145999999998%2C%22height%22%3A12.484379999999987%2C%22text%22%3A%22Lapi%2Fquestions%22%7D%2C%7B%22x%22%3A436.95312%2C%22y%22%3A152.30937%2C%22width%22%3A61.58959999999996%2C%22height%22%3A10.819799999999987%2C%22text%22%3A%22serverless%22%7D%2C%7B%22x%22%3A282.14688%2C%22y%22%3A153.14168%2C%22width%22%3A80.73230000000001%2C%22height%22%3A9.98748999999998%2C%22text%22%3A%22serverless-S...%22%7D%2C%7B%22x%22%3A595.08856%2C%22y%22%3A198.91771%2C%22width%22%3A44.943739999999934%2C%22height%22%3A10.819790000000012%2C%22text%22%3A%22LATEST%22%7D%2C%7B%22x%22%3A282.14688%2C%22y%22%3A199.75%2C%22width%22%3A79.89999999999998%2C%22height%22%3A10.819799999999987%2C%22text%22%3A%22serverless-S...%22%7D%2C%7B%22x%22%3A438.6177%2C%22y%22%3A198.91771%2C%22width%22%3A48.27292%2C%22height%22%3A12.484370000000013%2C%22text%22%3A%22getwish%22%7D%2C%7B%22x%22%3A131.50209%2C%22y%22%3A200.58229%2C%22width%22%3A54.93124%2C%22height%22%3A12.484379999999987%2C%22text%22%3A%22japifwish%22%7D%2C%7B%22x%22%3A594.2563%2C%22y%22%3A247.19063%2C%22width%22%3A45.775999999999954%2C%22height%22%3A12.484390000000019%2C%22text%22%3A%22LATEST%22%7D%2C%7B%22x%22%3A282.14688%2C%22y%22%3A248.02292%2C%22width%22%3A78.23541999999998%2C%22height%22%3A11.652100000000019%2C%22text%22%3A%22serverless-s...%22%7D%2C%7B%22x%22%3A130.6698%2C%22y%22%3A248.85521%2C%22width%22%3A67.41561999999999%2C%22height%22%3A11.652089999999987%2C%22text%22%3A%22%2Fapi%2Fscores%22%7D%2C%7B%22x%22%3A438.6177%2C%22y%22%3A248.85521%2C%22width%22%3A59.92501999999996%2C%22height%22%3A10.819810000000018%2C%22text%22%3A%22serverless%22%7D%2C%7B%22x%22%3A133.16667%2C%22y%22%3A296.29584%2C%22width%22%3A35.78854999999999%2C%22height%22%3A13.31668000000002%2C%22text%22%3A%22%E8%AF%B7%E8%BE%93%E5%85%A5%22%7D%2C%7B%22x%22%3A281.3146%2C%22y%22%3A297.12814%2C%22width%22%3A38.28540000000004%2C%22height%22%3A13.316660000000013%2C%22text%22%3A%22%E8%AF%B7%E9%80%89%E6%8B%A9%22%7D%2C%7B%22x%22%3A438.6177%2C%22y%22%3A297.12814%2C%22width%22%3A35.78854999999999%2C%22height%22%3A13.316660000000013%2C%22text%22%3A%22%E8%AF%B7%E9%80%89%E6%8B%A9%22%7D%2C%7B%22x%22%3A595.08856%2C%22y%22%3A297.12814%2C%22width%22%3A36.62083999999993%2C%22height%22%3A13.316660000000013%2C%22text%22%3A%22%E8%AF%B7%E9%80%89%E6%8B%A9%22%7D%2C%7B%22x%22%3A114.023964%2C%22y%22%3A357.88544%2C%22width%22%3A261.33959600000003%2C%22height%22%3A14.981229999999982%2C%22text%22%3A%22%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9F%9F%E5%90%8D%E5%8F%AA%E8%83%BD%E7%BB%91%E5%AE%9A%E8%AE%BE%E7%BD%AE%E4%BA%86HTTP%E8%A7%A6%E5%8F%91%E5%99%A8%E7%9A%84%E5%87%BD%E6%95%B0%22%7D%5D%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%E6%98%BE%E7%A4%BAPEM%E7%BC%96%E7%A0%81%E5%8F%82%E8%80%83%E6%A0%B7%E4%BE%8B%20%E8%B7%AF%E7%94%B1%E8%AE%BE%E7%BD%AE%20%E8%B7%AF%E5%BE%84%20%E6%9C%8D%E5%8A%A1%E5%90%8D%E7%A7%B0%20%E5%87%BD%E6%95%B0%E5%90%8D%E7%A7%B0%20%E7%89%88%E6%9C%AC%2F%E5%88%AB%E5%90%8D%20LATEST%20Lapi%2Fquestions%20serverless%20serverless-S...%20LATEST%20serverless-S...%20getwish%20japifwish%20LATEST%20serverless-s...%20%2Fapi%2Fscores%20serverless%20%E8%AF%B7%E8%BE%93%E5%85%A5%20%E8%AF%B7%E9%80%89%E6%8B%A9%20%E8%AF%B7%E9%80%89%E6%8B%A9%20%E8%AF%B7%E9%80%89%E6%8B%A9%20%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9F%9F%E5%90%8D%E5%8F%AA%E8%83%BD%E7%BB%91%E5%AE%9A%E8%AE%BE%E7%BD%AE%E4%BA%86HTTP%E8%A7%A6%E5%8F%91%E5%99%A8%E7%9A%84%E5%87%BD%E6%95%B0%22%2C%22width%22%3A799%2C%22height%22%3A381%7D"><span data-card-element="body"><span data-card-element="center"><span class="lake-image">
    <span class="lake-image-content lake-image-content-isvalid">
      <span data-role="detail" class="lake-image-detail">
        <span class="lake-image-meta" style="">
          <span class="lake-image-warning" style="display: none;">
            <i class="anticon anticon-exclamation-circle">
              <svg viewBox="64 64 896 896" class="" data-icon="exclamation-circle" width="1em" height="1em" fill="currentColor" aria-hidden="true">
                <path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"></path><path d="M464 688a48 48 0 1 0 96 0 48 48 0 1 0-96 0zM488 576h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"></path>
              </svg>
            </i>
          </span>
          <img data-role="image" src="https://cdn.nlark.com/yuque/0/2020/png/101638/1579059940539-0fe53ce7-ec7e-45e0-b8b0-270955feeed1.png?x-oss-process=image/resize,w_746" data-raw-src="https://cdn.nlark.com/yuque/0/2020/png/101638/1579059940539-0fe53ce7-ec7e-45e0-b8b0-270955feeed1.png" class="image lake-drag-image" alt="image.png" title="image.png" style="border: none; box-shadow: none; visibility: visible; width: 479px; height: 229px;">
          
  
  
          <span data-role="maximize" class="lake-image-editor-maximize" style="display: none;"><span class="lake-icon lake-icon-full-screen"></span></span>
          <div class="lake-image-mask"><p class="lake-image-mask-point" style="font-size: 13.210416915644556px;left: 194.27083644555697px;top: 6.993750373466834px;">显示PEM编码参考样例</p><p class="lake-image-mask-point" style="font-size: 12.433336445556941px;left: 107.23750466833543px;top: 50.510418222778476px;">路由设置</p><p class="lake-image-mask-point" style="font-size: 12.433331777221527px;left: 107.23750466833543px;top: 94.8041728911139px;">路径</p><p class="lake-image-mask-point" style="font-size: 12.433331777221527px;left: 247.88958177722154px;top: 95.58125466833543px;">服务名称</p><p class="lake-image-mask-point" style="font-size: 13.210414488110137px;left: 393.98127334167714px;top: 95.58125466833543px;">函数名称</p><p class="lake-image-mask-point" style="font-size: 12.433331777221527px;left: 538.5187640050062px;top: 95.58125466833543px;">版本/别名</p><p class="lake-image-mask-point" style="font-size: 12.433336445556936px;left: 554.8375466833543px;top: 139.875px;">LATEST</p><p class="lake-image-mask-point" style="font-size: 11.656254668335407px;left: 122.00209111389238px;top: 141.42916355444305px;">Lapi/questions</p><p class="lake-image-mask-point" style="font-size: 10.102091113892353px;left: 407.9687453316646px;top: 142.20624533166458px;">serverless</p><p class="lake-image-mask-point" style="font-size: 9.324990663329142px;left: 263.43125466833544px;top: 142.9833457822278px;">serverless-S...</p><p class="lake-image-mask-point" style="font-size: 10.102081777221539px;left: 555.6146004505632px;top: 185.72291822277847px;">LATEST</p><p class="lake-image-mask-point" style="font-size: 10.102091113892353px;left: 263.43125466833544px;top: 186.5px;">serverless-S...</p><p class="lake-image-mask-point" style="font-size: 11.656245331664593px;left: 409.52290888610764px;top: 185.72291822277847px;">getwish</p><p class="lake-image-mask-point" style="font-size: 11.656254668335407px;left: 122.7791728911139px;top: 187.27708177722153px;">japifwish</p><p class="lake-image-mask-point" style="font-size: 11.656264005006276px;left: 554.8375466833543px;top: 230.79375466833542px;">LATEST</p><p class="lake-image-mask-point" style="font-size: 10.87918222778475px;left: 263.43125466833544px;top: 231.57083644555695px;">serverless-s...</p><p class="lake-image-mask-point" style="font-size: 10.87917289111388px;left: 122.00209111389238px;top: 232.34791822277847px;">/api/scores</p><p class="lake-image-mask-point" style="font-size: 10.10210045056322px;left: 409.52290888610764px;top: 232.34791822277847px;">serverless</p><p class="lake-image-mask-point" style="font-size: 12.433345782227804px;left: 124.33333644555697px;top: 276.6416728911139px;">请输入</p><p class="lake-image-mask-point" style="font-size: 12.43332710888612px;left: 262.6541822277847px;top: 277.41876400500627px;">请选择</p><p class="lake-image-mask-point" style="font-size: 12.43332710888612px;left: 409.52290888610764px;top: 277.41876400500627px;">请选择</p><p class="lake-image-mask-point" style="font-size: 12.43332710888612px;left: 555.6146004505632px;top: 277.41876400500627px;">请选择</p><p class="lake-image-mask-point" style="font-size: 13.987481326658306px;left: 106.46042195744681px;top: 334.1458551188986px;">自定义域名只能绑定设置了HTTP触发器的函数</p></div>
        </span>
      </span>
    </span>
  </span></span></span></span></p><p style="text-indent: 2em;"><br></p><h1 id="OIpnG"><a class="lake-anchor" style="top: 13px;"><span class="lake-anchor-button lake-icon lake-icon-h1"></span></a>如何访问mysql</h1><p style="text-indent: 2em;">访问mysql主要是需要安装第三方的依赖性，在fun的模式下会比较方便。直接在项目下通过npm 安装，然后fun deploy就行。</p><h2 id="UZWsP"><a class="lake-anchor" style="top: 280.5px;"><span class="lake-anchor-button lake-icon lake-icon-h2"></span></a><span data-card-type="inline" data-lake-card="image" contenteditable="false" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F101638%2F1579057433171-1d292163-9694-4ec6-89f0-726f3d531d67.png%22%2C%22originWidth%22%3A940%2C%22originHeight%22%3A719%2C%22name%22%3A%22image.png%22%2C%22size%22%3A99481%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A26.4375%2C%22y%22%3A25.458334%2C%22width%22%3A14.6875%2C%22height%22%3A14.6875%2C%22text%22%3A%22%E6%97%A59345%22%7D%2C%7B%22x%22%3A60.708332%2C%22y%22%3A32.3125%2C%22width%22%3A227.16666800000002%2C%22height%22%3A14.6875%2C%22text%22%3A%22constmysqlrequire('mysql)%3B%22%7D%2C%7B%22x%22%3A63.645832%2C%22y%22%3A50.916668%2C%22width%22%3A158.624998%2C%22height%22%3A12.729163999999997%2C%22text%22%3A%22Letconnection-nuit%22%7D%2C%7B%22x%22%3A75.395836%2C%22y%22%3A86.166664%2C%22width%22%3A362.29166399999997%2C%22height%22%3A15.666672000000005%2C%22text%22%3A%22exports.initiatizefunction(ontextck)%22%7D%2C%7B%22x%22%3A89.104164%2C%22y%22%3A104.770836%2C%22width%22%3A301.58333600000003%2C%22height%22%3A13.708327999999995%2C%22text%22%3A%22connectionmysql.tonecton(%22%7D%2C%7B%22x%22%3A159.60417%2C%22y%22%3A122.395836%2C%22width%22%3A354.45833%2C%22height%22%3A13.708334000000008%2C%22text%22%3A%22host%3A'rm-bp195t84re6cop55g.myquccom%22%7D%2C%7B%22x%22%3A120.4375%2C%22y%22%3A123.375%2C%22width%22%3A29.375%2C%22height%22%3A11.75%2C%22text%22%3A%22host%22%7D%2C%7B%22x%22%3A23.5%2C%22y%22%3A136.10417%2C%22width%22%3A19.583332%2C%22height%22%3A19.583332%2C%22text%22%3A%22%E7%A7%8D%E9%98%B3NN%22%7D%2C%7B%22x%22%3A122.395836%2C%22y%22%3A141%2C%22width%22%3A33.291664%2C%22height%22%3A11.75%2C%22text%22%3A%22user%22%7D%2C%7B%22x%22%3A212.47917%2C%22y%22%3A141.97917%2C%22width%22%3A79.31248999999997%2C%22height%22%3A11.75%2C%22text%22%3A%22Lukou.prod'%2C%22%7D%2C%7B%22x%22%3A193.875%2C%22y%22%3A158.625%2C%22width%22%3A119.45834000000002%2C%22height%22%3A13.70832999999999%2C%22text%22%3A%22%3A%5C%22LukouHelLo401'%2C%22%7D%2C%7B%22x%22%3A120.4375%2C%22y%22%3A159.60417%2C%22width%22%3A78.33332999999999%2C%22height%22%3A12.729159999999979%2C%22text%22%3A%22password%3A%22%7D%2C%7B%22x%22%3A120.4375%2C%22y%22%3A177.22917%2C%22width%22%3A86.16667000000001%2C%22height%22%3A10.77082999999999%2C%22text%22%3A%22port%3A3306%2C%22%7D%2C%7B%22x%22%3A122.395836%2C%22y%22%3A194.85417%2C%22width%22%3A128.270834%2C%22height%22%3A12.729159999999979%2C%22text%22%3A%22database%3A%5C%22*lukou'%22%7D%2C%7B%22x%22%3A93.020836%2C%22y%22%3A211.5%2C%22width%22%3A24.479163999999997%2C%22height%22%3A13.70832999999999%2C%22text%22%3A%22M)%3A%22%7D%2C%7B%22x%22%3A92.041664%2C%22y%22%3A249.6875%2C%22width%22%3A150.791666%2C%22height%22%3A12.729159999999979%2C%22text%22%3A%22connection.connect)%3B%22%7D%2C%7B%22x%22%3A88.125%2C%22y%22%3A266.33334%2C%22width%22%3A151.77083%2C%22height%22%3A14.6875%2C%22text%22%3A%22cattback(null%2C'ok%5C%22)%22%7D%2C%7B%22x%22%3A86.166664%2C%22y%22%3A320.1875%2C%22width%22%3A411.249996%2C%22height%22%3A13.708340000000021%2C%22text%22%3A%22moduteexportshauctiuetst%22%7D%2C%7B%22x%22%3A83.229164%2C%22y%22%3A337.8125%2C%22width%22%3A425.937496%2C%22height%22%3A13.708340000000021%2C%22text%22%3A%22constsqlSLECTw%22%7D%2C%7B%22x%22%3A90.083336%2C%22y%22%3A355.4375%2C%22width%22%3A305.500004%2C%22height%22%3A14.6875%2C%22text%22%3A%22connection.query(sqLuctn()%22%7D%2C%7B%22x%22%3A103.791664%2C%22y%22%3A374.04166%2C%22width%22%3A82.25000600000001%2C%22height%22%3A12.729180000000042%2C%22text%22%3A%22if(err)%22%7D%2C%7B%22x%22%3A122.395836%2C%22y%22%3A390.6875%2C%22width%22%3A317.250004%2C%22height%22%3A16.64584000000002%2C%22text%22%3A%22console.tog((SELECTERROR%5Dse%22%7D%2C%7B%22x%22%3A124.354164%2C%22y%22%3A410.27084%2C%22width%22%3A278.08333600000003%2C%22height%22%3A13.708319999999958%2C%22text%22%3A%22constdatanewBuffer(son.stringify%22%7D%2C%7B%22x%22%3A158.625%2C%22y%22%3A429.85416%2C%22width%22%3A56.79167000000001%2C%22height%22%3A10.770840000000021%2C%22text%22%3A%22code%3A400%22%7D%2C%7B%22x%22%3A152.75%2C%22y%22%3A447.47916%2C%22width%22%3A64.625%2C%22height%22%3A11.75%2C%22text%22%3A%22data%3Aerr%22%7D%2C%7B%22x%22%3A122.395836%2C%22y%22%3A464.125%2C%22width%22%3A23.499993999999987%2C%22height%22%3A12.729159999999979%2C%22text%22%3A%22%E5%8A%9B))%22%7D%2C%7B%22x%22%3A24.479166%2C%22y%22%3A473.91666%2C%22width%22%3A16.645834%2C%22height%22%3A16.645834%2C%22text%22%3A%22%E7%8A%AF%E7%BE%BD%E5%88%97%E7%BE%BD%E6%B3%8A%E7%8A%AF%E7%8A%AF%E7%BE%BD%E7%94%B2%E5%A6%87%22%7D%2C%7B%22x%22%3A123.375%2C%22y%22%3A482.72916%2C%22width%22%3A137.08334000000002%2C%22height%22%3A11.75%2C%22text%22%3A%22response.send(data)%22%7D%2C%7B%22x%22%3A119.458336%2C%22y%22%3A503.29166%2C%22width%22%3A52.87499399999999%2C%22height%22%3A10.770840000000021%2C%22text%22%3A%22return%3B%22%7D%2C%7B%22x%22%3A112.604164%2C%22y%22%3A518.9583%2C%22width%22%3A58.75000600000001%2C%22height%22%3A12.729199999999992%2C%22text%22%3A%22yelsef%22%7D%2C%7B%22x%22%3A122.395836%2C%22y%22%3A536.5833%2C%22width%22%3A206.604164%2C%22height%22%3A12.729199999999992%2C%22text%22%3A%22response.setstatusCode(200)%22%7D%2C%7B%22x%22%3A121.416664%2C%22y%22%3A554.2083%2C%22width%22%3A363.27083600000003%2C%22height%22%3A13.708399999999983%2C%22text%22%3A%22response.setHeaderCcontent-typection%2F%22%7D%2C%7B%22x%22%3A125.333336%2C%22y%22%3A572.8125%2C%22width%22%3A272.20832399999995%2C%22height%22%3A11.75%2C%22text%22%3A%22constdatanewBuffer(json.stringify(%22%7D%2C%7B%22x%22%3A147.85417%2C%22y%22%3A591.4167%2C%22width%22%3A73.4375%2C%22height%22%3A11.75%2C%22text%22%3A%22code%3A200%2C%22%7D%2C%7B%22x%22%3A150.79167%2C%22y%22%3A608.0625%2C%22width%22%3A109.66667000000001%2C%22height%22%3A13.708300000000008%2C%22text%22%3A%22data%3Aresult%5Bo%5D%22%7D%2C%7B%22x%22%3A122.395836%2C%22y%22%3A626.6667%2C%22width%22%3A27.416663999999997%2C%22height%22%3A11.75%2C%22text%22%3A%22%E5%8A%9B))%22%7D%2C%7B%22x%22%3A120.4375%2C%22y%22%3A645.2708%2C%22width%22%3A138.0625%2C%22height%22%3A11.75%2C%22text%22%3A%22response.send(data)%22%7D%2C%7B%22x%22%3A79.3125%2C%22y%22%3A680.5208%2C%22width%22%3A21.541663999999997%2C%22height%22%3A14.6875%2C%22text%22%3A%22D%3A%22%7D%5D%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%E6%97%A59345%20constmysqlrequire('mysql)%3B%20Letconnection-nuit%20exports.initiatizefunction(ontextck)%20connectionmysql.tonecton(%20host%3A'rm-bp195t84re6cop55g.myquccom%20host%20%E7%A7%8D%E9%98%B3NN%20user%20Lukou.prod'%2C%20%3A%5C%22LukouHelLo401'%2C%20password%3A%20port%3A3306%2C%20database%3A%5C%22*lukou'%20M)%3A%20connection.connect)%3B%20cattback(null%2C'ok%5C%22)%20moduteexportshauctiuetst%20constsqlSLECTw%20connection.query(sqLuctn()%20if(err)%20console.tog((SELECTERROR%5Dse%20constdatanewBuffer(son.stringify%20code%3A400%20data%3Aerr%20%E5%8A%9B))%20%E7%8A%AF%E7%BE%BD%E5%88%97%E7%BE%BD%E6%B3%8A%E7%8A%AF%E7%8A%AF%E7%BE%BD%E7%94%B2%E5%A6%87%20response.send(data)%20return%3B%20yelsef%20response.setstatusCode(200)%20response.setHeaderCcontent-typection%2F%20constdatanewBuffer(json.stringify(%20code%3A200%2C%20data%3Aresult%5Bo%5D%20%E5%8A%9B))%20response.send(data)%20D%3A%22%2C%22width%22%3A940%2C%22height%22%3A719%7D"><span data-card-element="body"><span data-card-element="center"><span class="lake-image">
    <span class="lake-image-content lake-image-content-isvalid">
      <span data-role="detail" class="lake-image-detail">
        <span class="lake-image-meta" style="">
          <span class="lake-image-warning" style="display: none;">
            <i class="anticon anticon-exclamation-circle">
              <svg viewBox="64 64 896 896" class="" data-icon="exclamation-circle" width="1em" height="1em" fill="currentColor" aria-hidden="true">
                <path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"></path><path d="M464 688a48 48 0 1 0 96 0 48 48 0 1 0-96 0zM488 576h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"></path>
              </svg>
            </i>
          </span>
          <img data-role="image" src="https://cdn.nlark.com/yuque/0/2020/png/101638/1579057433171-1d292163-9694-4ec6-89f0-726f3d531d67.png?x-oss-process=image/resize,w_746" data-raw-src="https://cdn.nlark.com/yuque/0/2020/png/101638/1579057433171-1d292163-9694-4ec6-89f0-726f3d531d67.png" class="image lake-drag-image" alt="image.png" title="image.png" style="border: none; box-shadow: none; visibility: visible; width: 479px; height: 367px;">
          
  
  
          <span data-role="maximize" class="lake-image-editor-maximize" style="display: none;"><span class="lake-icon lake-icon-full-screen"></span></span>
          <div class="lake-image-mask"><p class="lake-image-mask-point" style="font-size: 11.65625px;left: 20.98125px;top: 20.20416719574468px;">日9345</p><p class="lake-image-mask-point" style="font-size: 11.65625px;left: 48.17916560851064px;top: 25.64375px;">constmysqlrequire('mysql);</p><p class="lake-image-mask-point" style="font-size: 10.102081217021274px;left: 50.510415608510634px;top: 40.40833439148936px;">Letconnection-nuit</p><p class="lake-image-mask-point" style="font-size: 12.433337565957451px;left: 59.83541878297872px;top: 68.38333121702128px;">exports.initiatizefunction(ontextck)</p><p class="lake-image-mask-point" style="font-size: 10.879162434042549px;left: 70.71458121702128px;top: 83.14791878297872px;">connectionmysql.tonecton(</p><p class="lake-image-mask-point" style="font-size: 10.879167195744687px;left: 126.66458597872341px;top: 97.13541878297872px;">host:'rm-bp195t84re6cop55g.myquccom</p><p class="lake-image-mask-point" style="font-size: 9.325px;left: 95.58125px;top: 97.9125px;">host</p><p class="lake-image-mask-point" style="font-size: 15.541665608510637px;left: 18.65px;top: 108.0145859787234px;">种阳NN</p><p class="lake-image-mask-point" style="font-size: 9.325px;left: 97.13541878297872px;top: 111.89999999999999px;">user</p><p class="lake-image-mask-point" style="font-size: 9.325px;left: 168.62708597872341px;top: 112.67708597872341px;">Lukou.prod',</p><p class="lake-image-mask-point" style="font-size: 10.879164021276587px;left: 153.86249999999998px;top: 125.8875px;">:"LukouHelLo401',</p><p class="lake-image-mask-point" style="font-size: 10.102078042553174px;left: 95.58125px;top: 126.66458597872341px;">password:</p><p class="lake-image-mask-point" style="font-size: 8.547914021276586px;left: 95.58125px;top: 140.65208597872342px;">port:3306,</p><p class="lake-image-mask-point" style="font-size: 10.102078042553174px;left: 97.13541878297872px;top: 154.6395859787234px;">database:"*lukou'</p><p class="lake-image-mask-point" style="font-size: 10.879164021276587px;left: 73.82291878297872px;top: 167.85px;">M):</p><p class="lake-image-mask-point" style="font-size: 10.102078042553174px;left: 73.04583121702127px;top: 198.15625px;">connection.connect);</p><p class="lake-image-mask-point" style="font-size: 11.65625px;left: 69.9375px;top: 211.3666719574468px;">cattback(null,'ok")</p><p class="lake-image-mask-point" style="font-size: 10.879171957446825px;left: 68.38333121702128px;top: 254.10625px;">moduteexportshauctiuetst</p><p class="lake-image-mask-point" style="font-size: 10.879171957446825px;left: 66.05208121702127px;top: 268.09375px;">constsqlSLECTw</p><p class="lake-image-mask-point" style="font-size: 11.65625px;left: 71.49166878297872px;top: 282.08125px;">connection.query(sqLuctn()</p><p class="lake-image-mask-point" style="font-size: 10.10209391489365px;left: 82.37083121702128px;top: 296.8458280425532px;">if(err)</p><p class="lake-image-mask-point" style="font-size: 13.210421957446824px;left: 97.13541878297872px;top: 310.05625px;">console.tog((SELECTERROR]se</p><p class="lake-image-mask-point" style="font-size: 10.879156085106349px;left: 98.68958121702127px;top: 325.59792195744683px;">constdatanewBuffer(son.stringify</p><p class="lake-image-mask-point" style="font-size: 8.547921957446825px;left: 125.8875px;top: 341.1395780425532px;">code:400</p><p class="lake-image-mask-point" style="font-size: 9.325px;left: 121.225px;top: 355.1270780425532px;">data:err</p><p class="lake-image-mask-point" style="font-size: 10.102078042553174px;left: 97.13541878297872px;top: 368.3375px;">力))</p><p class="lake-image-mask-point" style="font-size: 13.21041719574468px;left: 19.427082804255317px;top: 376.1083280425532px;">犯羽列羽泊犯犯羽甲妇</p><p class="lake-image-mask-point" style="font-size: 9.325px;left: 97.9125px;top: 383.10207804255316px;">response.send(data)</p><p class="lake-image-mask-point" style="font-size: 8.547921957446825px;left: 94.80416878297872px;top: 399.4208280425532px;">return;</p><p class="lake-image-mask-point" style="font-size: 10.102109787234035px;left: 89.36458121702127px;top: 411.85414021276597px;">yelsef</p><p class="lake-image-mask-point" style="font-size: 10.102109787234035px;left: 97.13541878297872px;top: 425.841640212766px;">response.setstatusCode(200)</p><p class="lake-image-mask-point" style="font-size: 10.879219574468072px;left: 96.35833121702127px;top: 439.82914021276594px;">response.setHeaderCcontent-typection/</p><p class="lake-image-mask-point" style="font-size: 9.325px;left: 99.46666878297873px;top: 454.59375px;">constdatanewBuffer(json.stringify(</p><p class="lake-image-mask-point" style="font-size: 9.325px;left: 117.3395859787234px;top: 469.358359787234px;">code:200,</p><p class="lake-image-mask-point" style="font-size: 10.879140212765964px;left: 119.6708359787234px;top: 482.56874999999997px;">data:result[o]</p><p class="lake-image-mask-point" style="font-size: 9.325px;left: 97.13541878297872px;top: 497.33335978723403px;">力))</p><p class="lake-image-mask-point" style="font-size: 9.325px;left: 95.58125px;top: 512.097890212766px;">response.send(data)</p><p class="lake-image-mask-point" style="font-size: 11.65625px;left: 62.94375px;top: 540.072890212766px;">D:</p></div>
        </span>
      </span>
    </span>
  </span></span></span></span></h2><p><br></p><p>需要注意的是，直接访问阿里云的云数据库是不行的，因为阿里云的数据库访问需要通过白名单，直接访问回被拒绝。但是由于运行函数计算的时候，IP地址是不固定的，所以没有办法直接只用IP地址设置白名单。因为需要使用<span>持专有网络</span>VPC。</p><p><span data-card-type="inline" data-lake-card="image" contenteditable="false" data-card-value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2020%2Fpng%2F101638%2F1579060213750-2784874f-d819-4cc1-8eb3-5cdf0768e2c8.png%22%2C%22originWidth%22%3A823%2C%22originHeight%22%3A494%2C%22name%22%3A%22image.png%22%2C%22size%22%3A162306%2C%22display%22%3A%22inline%22%2C%22align%22%3A%22left%22%2C%22linkTarget%22%3A%22_blank%22%2C%22status%22%3A%22done%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A224.61041%2C%22y%22%3A90.87291%2C%22width%22%3A77.15625%2C%22height%22%3A12.002079999999992%2C%22text%22%3A%22DomainName%22%7D%2C%7B%22x%22%3A283.76352%2C%22y%22%3A152.59792%2C%22width%22%3A36.86355999999995%2C%22height%22%3A9.430200000000013%2C%22text%22%3A%22cname%22%7D%2C%7B%22x%22%3A133.73749%2C%22y%22%3A220.32394%2C%22width%22%3A42.86458999999999%2C%22height%22%3A10.287509999999997%2C%22text%22%3A%22request%22%7D%2C%7B%22x%22%3A505.80206%2C%22y%22%3A230.61145%2C%22width%22%3A19.71774000000005%2C%22height%22%3A11.14479%2C%22text%22%3A%22link%22%7D%2C%7B%22x%22%3A130.30833%2C%22y%22%3A273.47604%2C%22width%22%3A52.29478999999998%2C%22height%22%3A10.287480000000016%2C%22text%22%3A%22response%22%7D%2C%7B%22x%22%3A694.4062%2C%22y%22%3A276.90518%2C%22width%22%3A27.433340000000044%2C%22height%22%3A12.859380000000044%2C%22text%22%3A%22RDS%22%7D%2C%7B%22x%22%3A241.75624%2C%22y%22%3A278.61978%2C%22width%22%3A48.865620000000035%2C%22height%22%3A11.144780000000026%2C%22text%22%3A%22Function%22%7D%2C%7B%22x%22%3A34.291664%2C%22y%22%3A279.47708%2C%22width%22%3A33.434371999999996%2C%22height%22%3A12.859379999999987%2C%22text%22%3A%22Client%22%7D%2C%7B%22x%22%3A390.0677%2C%22y%22%3A450.9354%2C%22width%22%3A47.15102000000002%2C%22height%22%3A15.431240000000003%2C%22text%22%3A%22FCVPC%22%7D%2C%7B%22x%22%3A590.67395%2C%22y%22%3A451.7927%2C%22width%22%3A57.438549999999964%2C%22height%22%3A12.859369999999956%2C%22text%22%3A%22UserVPC%22%7D%2C%7B%22x%22%3A593.2458%2C%22y%22%3A467.22394%2C%22width%22%3A217.75205999999991%2C%22height%22%3A15.431239999999946%2C%22text%22%3A%22htpswtbiod.csdhnetyungiinsighi%22%7D%5D%2C%22style%22%3A%22none%22%2C%22search%22%3A%22DomainName%20cname%20request%20link%20response%20RDS%20Function%20Client%20FCVPC%20UserVPC%20htpswtbiod.csdhnetyungiinsighi%22%2C%22width%22%3A823%2C%22height%22%3A494%7D"><span data-card-element="body"><span data-card-element="center"><span class="lake-image">
    <span class="lake-image-content lake-image-content-isvalid">
      <span data-role="detail" class="lake-image-detail">
        <span class="lake-image-meta" style="">
          <span class="lake-image-warning" style="display: none;">
            <i class="anticon anticon-exclamation-circle">
              <svg viewBox="64 64 896 896" class="" data-icon="exclamation-circle" width="1em" height="1em" fill="currentColor" aria-hidden="true">
                <path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"></path><path d="M464 688a48 48 0 1 0 96 0 48 48 0 1 0-96 0zM488 576h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"></path>
              </svg>
            </i>
          </span>
          <img data-role="image" src="https://cdn.nlark.com/yuque/0/2020/png/101638/1579060213750-2784874f-d819-4cc1-8eb3-5cdf0768e2c8.png?x-oss-process=image/resize,w_746" data-raw-src="https://cdn.nlark.com/yuque/0/2020/png/101638/1579060213750-2784874f-d819-4cc1-8eb3-5cdf0768e2c8.png" class="image lake-drag-image" alt="image.png" title="image.png" style="border: none; box-shadow: none; visibility: visible; width: 479px; height: 288px;">
          
  
  
          <span data-role="maximize" class="lake-image-editor-maximize" style="display: none;"><span class="lake-icon lake-icon-full-screen"></span></span>
          <div class="lake-image-mask"><p class="lake-image-mask-point" style="font-size: 10.87916364520048px;left: 203.595827290401px;top: 82.37082729040098px;">DomainName</p><p class="lake-image-mask-point" style="font-size: 8.547909113001227px;left: 257.2145636938032px;top: 138.3208363547995px;">cname</p><p class="lake-image-mask-point" style="font-size: 9.32500906439854px;left: 121.22499093560147px;top: 199.71040004860268px;">request</p><p class="lake-image-mask-point" style="font-size: 10.102081822600244px;left: 458.4791455164034px;top: 209.0354091130012px;">link</p><p class="lake-image-mask-point" style="font-size: 9.324981871202931px;left: 118.1166636452005px;top: 247.88958182260026px;">response</p><p class="lake-image-mask-point" style="font-size: 11.656254532199311px;left: 629.4374546780073px;top: 250.9978909842041px;">RDS</p><p class="lake-image-mask-point" style="font-size: 10.102072758201725px;left: 219.13749093560145px;top: 252.5520727582017px;">Function</p><p class="lake-image-mask-point" style="font-size: 11.65625453219926px;left: 31.08333091616039px;top: 253.32916364520048px;">Client</p><p class="lake-image-mask-point" style="font-size: 13.98749093560146px;left: 353.57290911300123px;top: 408.7458182260025px;">FCVPC</p><p class="lake-image-mask-point" style="font-size: 11.656245467800689px;left: 535.4104091130013px;top: 409.5229091130013px;">UserVPC</p><p class="lake-image-mask-point" style="font-size: 13.987490935601409px;left: 537.7416364520049px;top: 423.5104000486027px;">htpswtbiod.csdhnetyungiinsighi</p></div>
        </span>
      </span>
    </span>
  </span></span></span></span></p><p>具体细节可以看这篇文章</p><p><a href="https://blog.csdn.net/yunqiinsight/article/details/103887330" target="_blank" rel="noopener noreferrer">Serverless 解惑——函数计算如何访问 MySQL 数据库</a></p></div>